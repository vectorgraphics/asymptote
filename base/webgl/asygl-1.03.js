/*@license
 AsyGL: Render Bezier patches and triangles via subdivision with WebGL.
  Copyright 2019-26: John C. Bowman and Supakorn "Jamie" Rassameemasmuang
  University of Alberta

This program is free software; you can redistribute it and/or modify
it under the terms of the GNU Lesser General Public License as published by
the Free Software Foundation; either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Lesser General Public License for more details.

You should have received a copy of the GNU Lesser General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.
*/
/* license for gl-matrix: 
Copyright (c) 2015-2025, Brandon Jones, Colin MacKenzie IV.

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.*/
(()=>{"use strict";var t={409:(t,e,n)=>{n.r(e),n.d(e,{add:()=>L,adjoint:()=>m,clone:()=>s,copy:()=>o,create:()=>a,determinant:()=>d,equals:()=>_,exactEquals:()=>O,frob:()=>I,fromMat2d:()=>R,fromMat4:()=>i,fromQuat:()=>A,fromRotation:()=>x,fromScaling:()=>w,fromTranslation:()=>b,fromValues:()=>h,identity:()=>u,invert:()=>f,mul:()=>V,multiply:()=>M,multiplyScalar:()=>P,multiplyScalarAndAdd:()=>S,normalFromMat4:()=>E,projection:()=>T,rotate:()=>p,scale:()=>g,set:()=>l,str:()=>y,sub:()=>Y,subtract:()=>N,translate:()=>v,transpose:()=>c});var r=n(823);function a(){var t=new r.ARRAY_TYPE(9);return r.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function i(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function s(t){var e=new r.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function o(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function h(t,e,n,a,i,s,o,h,l){var u=new r.ARRAY_TYPE(9);return u[0]=t,u[1]=e,u[2]=n,u[3]=a,u[4]=i,u[5]=s,u[6]=o,u[7]=h,u[8]=l,u}function l(t,e,n,r,a,i,s,o,h,l){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=i,t[5]=s,t[6]=o,t[7]=h,t[8]=l,t}function u(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function c(t,e){if(t===e){var n=e[1],r=e[2],a=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=a}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function f(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],s=e[4],o=e[5],h=e[6],l=e[7],u=e[8],c=u*s-o*l,f=-u*i+o*h,m=l*i-s*h,d=n*c+r*f+a*m;return d?(d=1/d,t[0]=c*d,t[1]=(-u*r+a*l)*d,t[2]=(o*r-a*s)*d,t[3]=f*d,t[4]=(u*n-a*h)*d,t[5]=(-o*n+a*i)*d,t[6]=m*d,t[7]=(-l*n+r*h)*d,t[8]=(s*n-r*i)*d,t):null}function m(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],s=e[4],o=e[5],h=e[6],l=e[7],u=e[8];return t[0]=s*u-o*l,t[1]=a*l-r*u,t[2]=r*o-a*s,t[3]=o*h-i*u,t[4]=n*u-a*h,t[5]=a*i-n*o,t[6]=i*l-s*h,t[7]=r*h-n*l,t[8]=n*s-r*i,t}function d(t){var e=t[0],n=t[1],r=t[2],a=t[3],i=t[4],s=t[5],o=t[6],h=t[7],l=t[8];return e*(l*i-s*h)+n*(-l*a+s*o)+r*(h*a-i*o)}function M(t,e,n){var r=e[0],a=e[1],i=e[2],s=e[3],o=e[4],h=e[5],l=e[6],u=e[7],c=e[8],f=n[0],m=n[1],d=n[2],M=n[3],v=n[4],p=n[5],g=n[6],b=n[7],x=n[8];return t[0]=f*r+m*s+d*l,t[1]=f*a+m*o+d*u,t[2]=f*i+m*h+d*c,t[3]=M*r+v*s+p*l,t[4]=M*a+v*o+p*u,t[5]=M*i+v*h+p*c,t[6]=g*r+b*s+x*l,t[7]=g*a+b*o+x*u,t[8]=g*i+b*h+x*c,t}function v(t,e,n){var r=e[0],a=e[1],i=e[2],s=e[3],o=e[4],h=e[5],l=e[6],u=e[7],c=e[8],f=n[0],m=n[1];return t[0]=r,t[1]=a,t[2]=i,t[3]=s,t[4]=o,t[5]=h,t[6]=f*r+m*s+l,t[7]=f*a+m*o+u,t[8]=f*i+m*h+c,t}function p(t,e,n){var r=e[0],a=e[1],i=e[2],s=e[3],o=e[4],h=e[5],l=e[6],u=e[7],c=e[8],f=Math.sin(n),m=Math.cos(n);return t[0]=m*r+f*s,t[1]=m*a+f*o,t[2]=m*i+f*h,t[3]=m*s-f*r,t[4]=m*o-f*a,t[5]=m*h-f*i,t[6]=l,t[7]=u,t[8]=c,t}function g(t,e,n){var r=n[0],a=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=a*e[3],t[4]=a*e[4],t[5]=a*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function b(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function x(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function w(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function R(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function A(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],s=n+n,o=r+r,h=a+a,l=n*s,u=r*s,c=r*o,f=a*s,m=a*o,d=a*h,M=i*s,v=i*o,p=i*h;return t[0]=1-c-d,t[3]=u-p,t[6]=f+v,t[1]=u+p,t[4]=1-l-d,t[7]=m-M,t[2]=f-v,t[5]=m+M,t[8]=1-l-c,t}function E(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],s=e[4],o=e[5],h=e[6],l=e[7],u=e[8],c=e[9],f=e[10],m=e[11],d=e[12],M=e[13],v=e[14],p=e[15],g=n*o-r*s,b=n*h-a*s,x=n*l-i*s,w=r*h-a*o,R=r*l-i*o,A=a*l-i*h,E=u*M-c*d,T=u*v-f*d,y=u*p-m*d,I=c*v-f*M,L=c*p-m*M,N=f*p-m*v,P=g*N-b*L+x*I+w*y-R*T+A*E;return P?(P=1/P,t[0]=(o*N-h*L+l*I)*P,t[1]=(h*y-s*N-l*T)*P,t[2]=(s*L-o*y+l*E)*P,t[3]=(a*L-r*N-i*I)*P,t[4]=(n*N-a*y+i*T)*P,t[5]=(r*y-n*L-i*E)*P,t[6]=(M*A-v*R+p*w)*P,t[7]=(v*x-d*A-p*b)*P,t[8]=(d*R-M*x+p*g)*P,t):null}function T(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function y(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function I(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function L(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t}function N(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}function P(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t}function S(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t}function O(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function _(t,e){var n=t[0],a=t[1],i=t[2],s=t[3],o=t[4],h=t[5],l=t[6],u=t[7],c=t[8],f=e[0],m=e[1],d=e[2],M=e[3],v=e[4],p=e[5],g=e[6],b=e[7],x=e[8];return Math.abs(n-f)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(a-m)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(i-d)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(s-M)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(o-v)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(h-p)<=r.EPSILON*Math.max(1,Math.abs(h),Math.abs(p))&&Math.abs(l-g)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(g))&&Math.abs(u-b)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(b))&&Math.abs(c-x)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(x))}var V=M,Y=N},684:(t,e,n)=>{n.r(e),n.d(e,{add:()=>k,adjoint:()=>f,clone:()=>i,copy:()=>s,create:()=>a,determinant:()=>m,equals:()=>K,exactEquals:()=>Q,frob:()=>G,fromQuat:()=>V,fromQuat2:()=>L,fromRotation:()=>A,fromRotationTranslation:()=>I,fromRotationTranslationScale:()=>O,fromRotationTranslationScaleOrigin:()=>_,fromScaling:()=>R,fromTranslation:()=>w,fromValues:()=>o,fromXRotation:()=>E,fromYRotation:()=>T,fromZRotation:()=>y,frustum:()=>Y,getRotation:()=>S,getScaling:()=>P,getTranslation:()=>N,identity:()=>l,invert:()=>c,lookAt:()=>X,mul:()=>J,multiply:()=>d,multiplyScalar:()=>$,multiplyScalarAndAdd:()=>Z,ortho:()=>C,orthoNO:()=>F,orthoZO:()=>z,perspective:()=>B,perspectiveFromFieldOfView:()=>q,perspectiveNO:()=>D,perspectiveZO:()=>U,rotate:()=>p,rotateX:()=>g,rotateY:()=>b,rotateZ:()=>x,scale:()=>v,set:()=>h,str:()=>W,sub:()=>tt,subtract:()=>j,targetTo:()=>H,translate:()=>M,transpose:()=>u});var r=n(823);function a(){var t=new r.ARRAY_TYPE(16);return r.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function i(t){var e=new r.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function s(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function o(t,e,n,a,i,s,o,h,l,u,c,f,m,d,M,v){var p=new r.ARRAY_TYPE(16);return p[0]=t,p[1]=e,p[2]=n,p[3]=a,p[4]=i,p[5]=s,p[6]=o,p[7]=h,p[8]=l,p[9]=u,p[10]=c,p[11]=f,p[12]=m,p[13]=d,p[14]=M,p[15]=v,p}function h(t,e,n,r,a,i,s,o,h,l,u,c,f,m,d,M,v){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=i,t[5]=s,t[6]=o,t[7]=h,t[8]=l,t[9]=u,t[10]=c,t[11]=f,t[12]=m,t[13]=d,t[14]=M,t[15]=v,t}function l(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function u(t,e){if(t===e){var n=e[1],r=e[2],a=e[3],i=e[6],s=e[7],o=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=i,t[11]=e[14],t[12]=a,t[13]=s,t[14]=o}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function c(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],s=e[4],o=e[5],h=e[6],l=e[7],u=e[8],c=e[9],f=e[10],m=e[11],d=e[12],M=e[13],v=e[14],p=e[15],g=n*o-r*s,b=n*h-a*s,x=n*l-i*s,w=r*h-a*o,R=r*l-i*o,A=a*l-i*h,E=u*M-c*d,T=u*v-f*d,y=u*p-m*d,I=c*v-f*M,L=c*p-m*M,N=f*p-m*v,P=g*N-b*L+x*I+w*y-R*T+A*E;return P?(P=1/P,t[0]=(o*N-h*L+l*I)*P,t[1]=(a*L-r*N-i*I)*P,t[2]=(M*A-v*R+p*w)*P,t[3]=(f*R-c*A-m*w)*P,t[4]=(h*y-s*N-l*T)*P,t[5]=(n*N-a*y+i*T)*P,t[6]=(v*x-d*A-p*b)*P,t[7]=(u*A-f*x+m*b)*P,t[8]=(s*L-o*y+l*E)*P,t[9]=(r*y-n*L-i*E)*P,t[10]=(d*R-M*x+p*g)*P,t[11]=(c*x-u*R-m*g)*P,t[12]=(o*T-s*I-h*E)*P,t[13]=(n*I-r*T+a*E)*P,t[14]=(M*b-d*w-v*g)*P,t[15]=(u*w-c*b+f*g)*P,t):null}function f(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],s=e[4],o=e[5],h=e[6],l=e[7],u=e[8],c=e[9],f=e[10],m=e[11],d=e[12],M=e[13],v=e[14],p=e[15];return t[0]=o*(f*p-m*v)-c*(h*p-l*v)+M*(h*m-l*f),t[1]=-(r*(f*p-m*v)-c*(a*p-i*v)+M*(a*m-i*f)),t[2]=r*(h*p-l*v)-o*(a*p-i*v)+M*(a*l-i*h),t[3]=-(r*(h*m-l*f)-o*(a*m-i*f)+c*(a*l-i*h)),t[4]=-(s*(f*p-m*v)-u*(h*p-l*v)+d*(h*m-l*f)),t[5]=n*(f*p-m*v)-u*(a*p-i*v)+d*(a*m-i*f),t[6]=-(n*(h*p-l*v)-s*(a*p-i*v)+d*(a*l-i*h)),t[7]=n*(h*m-l*f)-s*(a*m-i*f)+u*(a*l-i*h),t[8]=s*(c*p-m*M)-u*(o*p-l*M)+d*(o*m-l*c),t[9]=-(n*(c*p-m*M)-u*(r*p-i*M)+d*(r*m-i*c)),t[10]=n*(o*p-l*M)-s*(r*p-i*M)+d*(r*l-i*o),t[11]=-(n*(o*m-l*c)-s*(r*m-i*c)+u*(r*l-i*o)),t[12]=-(s*(c*v-f*M)-u*(o*v-h*M)+d*(o*f-h*c)),t[13]=n*(c*v-f*M)-u*(r*v-a*M)+d*(r*f-a*c),t[14]=-(n*(o*v-h*M)-s*(r*v-a*M)+d*(r*h-a*o)),t[15]=n*(o*f-h*c)-s*(r*f-a*c)+u*(r*h-a*o),t}function m(t){var e=t[0],n=t[1],r=t[2],a=t[3],i=t[4],s=t[5],o=t[6],h=t[7],l=t[8],u=t[9],c=t[10],f=t[11],m=t[12],d=t[13],M=t[14],v=t[15];return(e*s-n*i)*(c*v-f*M)-(e*o-r*i)*(u*v-f*d)+(e*h-a*i)*(u*M-c*d)+(n*o-r*s)*(l*v-f*m)-(n*h-a*s)*(l*M-c*m)+(r*h-a*o)*(l*d-u*m)}function d(t,e,n){var r=e[0],a=e[1],i=e[2],s=e[3],o=e[4],h=e[5],l=e[6],u=e[7],c=e[8],f=e[9],m=e[10],d=e[11],M=e[12],v=e[13],p=e[14],g=e[15],b=n[0],x=n[1],w=n[2],R=n[3];return t[0]=b*r+x*o+w*c+R*M,t[1]=b*a+x*h+w*f+R*v,t[2]=b*i+x*l+w*m+R*p,t[3]=b*s+x*u+w*d+R*g,b=n[4],x=n[5],w=n[6],R=n[7],t[4]=b*r+x*o+w*c+R*M,t[5]=b*a+x*h+w*f+R*v,t[6]=b*i+x*l+w*m+R*p,t[7]=b*s+x*u+w*d+R*g,b=n[8],x=n[9],w=n[10],R=n[11],t[8]=b*r+x*o+w*c+R*M,t[9]=b*a+x*h+w*f+R*v,t[10]=b*i+x*l+w*m+R*p,t[11]=b*s+x*u+w*d+R*g,b=n[12],x=n[13],w=n[14],R=n[15],t[12]=b*r+x*o+w*c+R*M,t[13]=b*a+x*h+w*f+R*v,t[14]=b*i+x*l+w*m+R*p,t[15]=b*s+x*u+w*d+R*g,t}function M(t,e,n){var r,a,i,s,o,h,l,u,c,f,m,d,M=n[0],v=n[1],p=n[2];return e===t?(t[12]=e[0]*M+e[4]*v+e[8]*p+e[12],t[13]=e[1]*M+e[5]*v+e[9]*p+e[13],t[14]=e[2]*M+e[6]*v+e[10]*p+e[14],t[15]=e[3]*M+e[7]*v+e[11]*p+e[15]):(r=e[0],a=e[1],i=e[2],s=e[3],o=e[4],h=e[5],l=e[6],u=e[7],c=e[8],f=e[9],m=e[10],d=e[11],t[0]=r,t[1]=a,t[2]=i,t[3]=s,t[4]=o,t[5]=h,t[6]=l,t[7]=u,t[8]=c,t[9]=f,t[10]=m,t[11]=d,t[12]=r*M+o*v+c*p+e[12],t[13]=a*M+h*v+f*p+e[13],t[14]=i*M+l*v+m*p+e[14],t[15]=s*M+u*v+d*p+e[15]),t}function v(t,e,n){var r=n[0],a=n[1],i=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*a,t[5]=e[5]*a,t[6]=e[6]*a,t[7]=e[7]*a,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function p(t,e,n,a){var i,s,o,h,l,u,c,f,m,d,M,v,p,g,b,x,w,R,A,E,T,y,I,L,N=a[0],P=a[1],S=a[2],O=Math.hypot(N,P,S);return O<r.EPSILON?null:(N*=O=1/O,P*=O,S*=O,i=Math.sin(n),o=1-(s=Math.cos(n)),h=e[0],l=e[1],u=e[2],c=e[3],f=e[4],m=e[5],d=e[6],M=e[7],v=e[8],p=e[9],g=e[10],b=e[11],x=N*N*o+s,w=P*N*o+S*i,R=S*N*o-P*i,A=N*P*o-S*i,E=P*P*o+s,T=S*P*o+N*i,y=N*S*o+P*i,I=P*S*o-N*i,L=S*S*o+s,t[0]=h*x+f*w+v*R,t[1]=l*x+m*w+p*R,t[2]=u*x+d*w+g*R,t[3]=c*x+M*w+b*R,t[4]=h*A+f*E+v*T,t[5]=l*A+m*E+p*T,t[6]=u*A+d*E+g*T,t[7]=c*A+M*E+b*T,t[8]=h*y+f*I+v*L,t[9]=l*y+m*I+p*L,t[10]=u*y+d*I+g*L,t[11]=c*y+M*I+b*L,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function g(t,e,n){var r=Math.sin(n),a=Math.cos(n),i=e[4],s=e[5],o=e[6],h=e[7],l=e[8],u=e[9],c=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=i*a+l*r,t[5]=s*a+u*r,t[6]=o*a+c*r,t[7]=h*a+f*r,t[8]=l*a-i*r,t[9]=u*a-s*r,t[10]=c*a-o*r,t[11]=f*a-h*r,t}function b(t,e,n){var r=Math.sin(n),a=Math.cos(n),i=e[0],s=e[1],o=e[2],h=e[3],l=e[8],u=e[9],c=e[10],f=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*a-l*r,t[1]=s*a-u*r,t[2]=o*a-c*r,t[3]=h*a-f*r,t[8]=i*r+l*a,t[9]=s*r+u*a,t[10]=o*r+c*a,t[11]=h*r+f*a,t}function x(t,e,n){var r=Math.sin(n),a=Math.cos(n),i=e[0],s=e[1],o=e[2],h=e[3],l=e[4],u=e[5],c=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*a+l*r,t[1]=s*a+u*r,t[2]=o*a+c*r,t[3]=h*a+f*r,t[4]=l*a-i*r,t[5]=u*a-s*r,t[6]=c*a-o*r,t[7]=f*a-h*r,t}function w(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function R(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function A(t,e,n){var a,i,s,o=n[0],h=n[1],l=n[2],u=Math.hypot(o,h,l);return u<r.EPSILON?null:(o*=u=1/u,h*=u,l*=u,a=Math.sin(e),s=1-(i=Math.cos(e)),t[0]=o*o*s+i,t[1]=h*o*s+l*a,t[2]=l*o*s-h*a,t[3]=0,t[4]=o*h*s-l*a,t[5]=h*h*s+i,t[6]=l*h*s+o*a,t[7]=0,t[8]=o*l*s+h*a,t[9]=h*l*s-o*a,t[10]=l*l*s+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function E(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function T(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function y(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function I(t,e,n){var r=e[0],a=e[1],i=e[2],s=e[3],o=r+r,h=a+a,l=i+i,u=r*o,c=r*h,f=r*l,m=a*h,d=a*l,M=i*l,v=s*o,p=s*h,g=s*l;return t[0]=1-(m+M),t[1]=c+g,t[2]=f-p,t[3]=0,t[4]=c-g,t[5]=1-(u+M),t[6]=d+v,t[7]=0,t[8]=f+p,t[9]=d-v,t[10]=1-(u+m),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function L(t,e){var n=new r.ARRAY_TYPE(3),a=-e[0],i=-e[1],s=-e[2],o=e[3],h=e[4],l=e[5],u=e[6],c=e[7],f=a*a+i*i+s*s+o*o;return f>0?(n[0]=2*(h*o+c*a+l*s-u*i)/f,n[1]=2*(l*o+c*i+u*a-h*s)/f,n[2]=2*(u*o+c*s+h*i-l*a)/f):(n[0]=2*(h*o+c*a+l*s-u*i),n[1]=2*(l*o+c*i+u*a-h*s),n[2]=2*(u*o+c*s+h*i-l*a)),I(t,e,n),t}function N(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function P(t,e){var n=e[0],r=e[1],a=e[2],i=e[4],s=e[5],o=e[6],h=e[8],l=e[9],u=e[10];return t[0]=Math.hypot(n,r,a),t[1]=Math.hypot(i,s,o),t[2]=Math.hypot(h,l,u),t}function S(t,e){var n=new r.ARRAY_TYPE(3);P(n,e);var a=1/n[0],i=1/n[1],s=1/n[2],o=e[0]*a,h=e[1]*i,l=e[2]*s,u=e[4]*a,c=e[5]*i,f=e[6]*s,m=e[8]*a,d=e[9]*i,M=e[10]*s,v=o+c+M,p=0;return v>0?(p=2*Math.sqrt(v+1),t[3]=.25*p,t[0]=(f-d)/p,t[1]=(m-l)/p,t[2]=(h-u)/p):o>c&&o>M?(p=2*Math.sqrt(1+o-c-M),t[3]=(f-d)/p,t[0]=.25*p,t[1]=(h+u)/p,t[2]=(m+l)/p):c>M?(p=2*Math.sqrt(1+c-o-M),t[3]=(m-l)/p,t[0]=(h+u)/p,t[1]=.25*p,t[2]=(f+d)/p):(p=2*Math.sqrt(1+M-o-c),t[3]=(h-u)/p,t[0]=(m+l)/p,t[1]=(f+d)/p,t[2]=.25*p),t}function O(t,e,n,r){var a=e[0],i=e[1],s=e[2],o=e[3],h=a+a,l=i+i,u=s+s,c=a*h,f=a*l,m=a*u,d=i*l,M=i*u,v=s*u,p=o*h,g=o*l,b=o*u,x=r[0],w=r[1],R=r[2];return t[0]=(1-(d+v))*x,t[1]=(f+b)*x,t[2]=(m-g)*x,t[3]=0,t[4]=(f-b)*w,t[5]=(1-(c+v))*w,t[6]=(M+p)*w,t[7]=0,t[8]=(m+g)*R,t[9]=(M-p)*R,t[10]=(1-(c+d))*R,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function _(t,e,n,r,a){var i=e[0],s=e[1],o=e[2],h=e[3],l=i+i,u=s+s,c=o+o,f=i*l,m=i*u,d=i*c,M=s*u,v=s*c,p=o*c,g=h*l,b=h*u,x=h*c,w=r[0],R=r[1],A=r[2],E=a[0],T=a[1],y=a[2],I=(1-(M+p))*w,L=(m+x)*w,N=(d-b)*w,P=(m-x)*R,S=(1-(f+p))*R,O=(v+g)*R,_=(d+b)*A,V=(v-g)*A,Y=(1-(f+M))*A;return t[0]=I,t[1]=L,t[2]=N,t[3]=0,t[4]=P,t[5]=S,t[6]=O,t[7]=0,t[8]=_,t[9]=V,t[10]=Y,t[11]=0,t[12]=n[0]+E-(I*E+P*T+_*y),t[13]=n[1]+T-(L*E+S*T+V*y),t[14]=n[2]+y-(N*E+O*T+Y*y),t[15]=1,t}function V(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],s=n+n,o=r+r,h=a+a,l=n*s,u=r*s,c=r*o,f=a*s,m=a*o,d=a*h,M=i*s,v=i*o,p=i*h;return t[0]=1-c-d,t[1]=u+p,t[2]=f-v,t[3]=0,t[4]=u-p,t[5]=1-l-d,t[6]=m+M,t[7]=0,t[8]=f+v,t[9]=m-M,t[10]=1-l-c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Y(t,e,n,r,a,i,s){var o=1/(n-e),h=1/(a-r),l=1/(i-s);return t[0]=2*i*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*i*h,t[6]=0,t[7]=0,t[8]=(n+e)*o,t[9]=(a+r)*h,t[10]=(s+i)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=s*i*2*l,t[15]=0,t}function D(t,e,n,r,a){var i,s=1/Math.tan(e/2);return t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=a&&a!==1/0?(i=1/(r-a),t[10]=(a+r)*i,t[14]=2*a*r*i):(t[10]=-1,t[14]=-2*r),t}var B=D;function U(t,e,n,r,a){var i,s=1/Math.tan(e/2);return t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=a&&a!==1/0?(i=1/(r-a),t[10]=a*i,t[14]=a*r*i):(t[10]=-1,t[14]=-r),t}function q(t,e,n,r){var a=Math.tan(e.upDegrees*Math.PI/180),i=Math.tan(e.downDegrees*Math.PI/180),s=Math.tan(e.leftDegrees*Math.PI/180),o=Math.tan(e.rightDegrees*Math.PI/180),h=2/(s+o),l=2/(a+i);return t[0]=h,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=-(s-o)*h*.5,t[9]=(a-i)*l*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function F(t,e,n,r,a,i,s){var o=1/(e-n),h=1/(r-a),l=1/(i-s);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*h,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*o,t[13]=(a+r)*h,t[14]=(s+i)*l,t[15]=1,t}var C=F;function z(t,e,n,r,a,i,s){var o=1/(e-n),h=1/(r-a),l=1/(i-s);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*h,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=l,t[11]=0,t[12]=(e+n)*o,t[13]=(a+r)*h,t[14]=i*l,t[15]=1,t}function X(t,e,n,a){var i,s,o,h,u,c,f,m,d,M,v=e[0],p=e[1],g=e[2],b=a[0],x=a[1],w=a[2],R=n[0],A=n[1],E=n[2];return Math.abs(v-R)<r.EPSILON&&Math.abs(p-A)<r.EPSILON&&Math.abs(g-E)<r.EPSILON?l(t):(f=v-R,m=p-A,d=g-E,i=x*(d*=M=1/Math.hypot(f,m,d))-w*(m*=M),s=w*(f*=M)-b*d,o=b*m-x*f,(M=Math.hypot(i,s,o))?(i*=M=1/M,s*=M,o*=M):(i=0,s=0,o=0),h=m*o-d*s,u=d*i-f*o,c=f*s-m*i,(M=Math.hypot(h,u,c))?(h*=M=1/M,u*=M,c*=M):(h=0,u=0,c=0),t[0]=i,t[1]=h,t[2]=f,t[3]=0,t[4]=s,t[5]=u,t[6]=m,t[7]=0,t[8]=o,t[9]=c,t[10]=d,t[11]=0,t[12]=-(i*v+s*p+o*g),t[13]=-(h*v+u*p+c*g),t[14]=-(f*v+m*p+d*g),t[15]=1,t)}function H(t,e,n,r){var a=e[0],i=e[1],s=e[2],o=r[0],h=r[1],l=r[2],u=a-n[0],c=i-n[1],f=s-n[2],m=u*u+c*c+f*f;m>0&&(u*=m=1/Math.sqrt(m),c*=m,f*=m);var d=h*f-l*c,M=l*u-o*f,v=o*c-h*u;return(m=d*d+M*M+v*v)>0&&(d*=m=1/Math.sqrt(m),M*=m,v*=m),t[0]=d,t[1]=M,t[2]=v,t[3]=0,t[4]=c*v-f*M,t[5]=f*d-u*v,t[6]=u*M-c*d,t[7]=0,t[8]=u,t[9]=c,t[10]=f,t[11]=0,t[12]=a,t[13]=i,t[14]=s,t[15]=1,t}function W(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function G(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function k(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function j(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function $(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function Z(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function Q(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function K(t,e){var n=t[0],a=t[1],i=t[2],s=t[3],o=t[4],h=t[5],l=t[6],u=t[7],c=t[8],f=t[9],m=t[10],d=t[11],M=t[12],v=t[13],p=t[14],g=t[15],b=e[0],x=e[1],w=e[2],R=e[3],A=e[4],E=e[5],T=e[6],y=e[7],I=e[8],L=e[9],N=e[10],P=e[11],S=e[12],O=e[13],_=e[14],V=e[15];return Math.abs(n-b)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(a-x)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(i-w)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(w))&&Math.abs(s-R)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(R))&&Math.abs(o-A)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(A))&&Math.abs(h-E)<=r.EPSILON*Math.max(1,Math.abs(h),Math.abs(E))&&Math.abs(l-T)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(T))&&Math.abs(u-y)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(c-I)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(I))&&Math.abs(f-L)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(L))&&Math.abs(m-N)<=r.EPSILON*Math.max(1,Math.abs(m),Math.abs(N))&&Math.abs(d-P)<=r.EPSILON*Math.max(1,Math.abs(d),Math.abs(P))&&Math.abs(M-S)<=r.EPSILON*Math.max(1,Math.abs(M),Math.abs(S))&&Math.abs(v-O)<=r.EPSILON*Math.max(1,Math.abs(v),Math.abs(O))&&Math.abs(p-_)<=r.EPSILON*Math.max(1,Math.abs(p),Math.abs(_))&&Math.abs(g-V)<=r.EPSILON*Math.max(1,Math.abs(g),Math.abs(V))}var J=d,tt=j},796:(t,e,n)=>{n.r(e),n.d(e,{add:()=>l,ceil:()=>m,clone:()=>i,copy:()=>o,create:()=>a,cross:()=>L,dist:()=>C,distance:()=>x,div:()=>F,divide:()=>f,dot:()=>I,equals:()=>D,exactEquals:()=>Y,floor:()=>d,forEach:()=>W,fromValues:()=>s,inverse:()=>T,len:()=>X,length:()=>R,lerp:()=>N,max:()=>v,min:()=>M,mul:()=>q,multiply:()=>c,negate:()=>E,normalize:()=>y,random:()=>P,round:()=>p,scale:()=>g,scaleAndAdd:()=>b,set:()=>h,sqrDist:()=>z,sqrLen:()=>H,squaredDistance:()=>w,squaredLength:()=>A,str:()=>V,sub:()=>U,subtract:()=>u,transformMat4:()=>S,transformQuat:()=>O,zero:()=>_});var r=n(823);function a(){var t=new r.ARRAY_TYPE(4);return r.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function i(t){var e=new r.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function s(t,e,n,a){var i=new r.ARRAY_TYPE(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=a,i}function o(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function h(t,e,n,r,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t}function l(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function u(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function c(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function f(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function m(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function d(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function M(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t}function v(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t}function p(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function g(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function b(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}function x(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2],i=e[3]-t[3];return Math.hypot(n,r,a,i)}function w(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2],i=e[3]-t[3];return n*n+r*r+a*a+i*i}function R(t){var e=t[0],n=t[1],r=t[2],a=t[3];return Math.hypot(e,n,r,a)}function A(t){var e=t[0],n=t[1],r=t[2],a=t[3];return e*e+n*n+r*r+a*a}function E(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function T(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function y(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],s=n*n+r*r+a*a+i*i;return s>0&&(s=1/Math.sqrt(s)),t[0]=n*s,t[1]=r*s,t[2]=a*s,t[3]=i*s,t}function I(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function L(t,e,n,r){var a=n[0]*r[1]-n[1]*r[0],i=n[0]*r[2]-n[2]*r[0],s=n[0]*r[3]-n[3]*r[0],o=n[1]*r[2]-n[2]*r[1],h=n[1]*r[3]-n[3]*r[1],l=n[2]*r[3]-n[3]*r[2],u=e[0],c=e[1],f=e[2],m=e[3];return t[0]=c*l-f*h+m*o,t[1]=-u*l+f*s-m*i,t[2]=u*h-c*s+m*a,t[3]=-u*o+c*i-f*a,t}function N(t,e,n,r){var a=e[0],i=e[1],s=e[2],o=e[3];return t[0]=a+r*(n[0]-a),t[1]=i+r*(n[1]-i),t[2]=s+r*(n[2]-s),t[3]=o+r*(n[3]-o),t}function P(t,e){var n,a,i,s,o,h;e=e||1;do{o=(n=2*r.RANDOM()-1)*n+(a=2*r.RANDOM()-1)*a}while(o>=1);do{h=(i=2*r.RANDOM()-1)*i+(s=2*r.RANDOM()-1)*s}while(h>=1);var l=Math.sqrt((1-o)/h);return t[0]=e*n,t[1]=e*a,t[2]=e*i*l,t[3]=e*s*l,t}function S(t,e,n){var r=e[0],a=e[1],i=e[2],s=e[3];return t[0]=n[0]*r+n[4]*a+n[8]*i+n[12]*s,t[1]=n[1]*r+n[5]*a+n[9]*i+n[13]*s,t[2]=n[2]*r+n[6]*a+n[10]*i+n[14]*s,t[3]=n[3]*r+n[7]*a+n[11]*i+n[15]*s,t}function O(t,e,n){var r=e[0],a=e[1],i=e[2],s=n[0],o=n[1],h=n[2],l=n[3],u=l*r+o*i-h*a,c=l*a+h*r-s*i,f=l*i+s*a-o*r,m=-s*r-o*a-h*i;return t[0]=u*l+m*-s+c*-h-f*-o,t[1]=c*l+m*-o+f*-s-u*-h,t[2]=f*l+m*-h+u*-o-c*-s,t[3]=e[3],t}function _(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function V(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function Y(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function D(t,e){var n=t[0],a=t[1],i=t[2],s=t[3],o=e[0],h=e[1],l=e[2],u=e[3];return Math.abs(n-o)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(a-h)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(i-l)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(s-u)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(u))}var B,U=u,q=c,F=f,C=x,z=w,X=R,H=A,W=(B=a(),function(t,e,n,r,a,i){var s,o;for(e||(e=4),n||(n=0),o=r?Math.min(r*e+n,t.length):t.length,s=n;s<o;s+=e)B[0]=t[s],B[1]=t[s+1],B[2]=t[s+2],B[3]=t[s+3],a(B,B,i),t[s]=B[0],t[s+1]=B[1],t[s+2]=B[2],t[s+3]=B[3];return t})},823:(t,e,n)=>{n.r(e),n.d(e,{ARRAY_TYPE:()=>a,EPSILON:()=>r,RANDOM:()=>i,equals:()=>l,setMatrixArrayType:()=>s,toRadian:()=>h});var r=1e-6,a="undefined"!=typeof Float32Array?Float32Array:Array,i=Math.random;function s(t){a=t}var o=Math.PI/180;function h(t){return t*o}function l(t,e){return Math.abs(t-e)<=r*Math.max(1,Math.abs(t),Math.abs(e))}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)})}},e={};function n(r){var a=e[r];if(void 0!==a)return a.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,n),i.exports}n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t=n(684),e=n(409),r=n(796);const a={canvasWidth:0,canvasHeight:0,absolute:!1,minBound:[0,0,0],maxBound:[0,0,0],orthographic:!1,angleOfView:0,initialZoom:0,viewportShift:[0,0],viewportMargin:[0,0],background:[],zoomFactor:0,zoomPinchFactor:0,zoomPinchCap:0,zoomStep:0,shiftHoldDistance:0,shiftWaitTime:0,vibrateTime:0,ibl:!1,webgl2:!1,imageURL:"",image:"",Transform:[],Centers:[],canvasWidth0:0,canvasHeight0:0,zoom0:0,embedded:!1,canvas:null};globalThis.document.asy=a;const i=a;let s,o,h,l,u,c,f,m=[],d=[],M=[],v=0,p=2;const g=1/3,b=Math.acos(-1),x=b/180,w=Math.ceil(1-Math.log2(Number.EPSILON));let R,A,E,T,y,I,L,N,P,S,O,_,V,Y,D,B,U,q,F,C,z=t.create(),X=t.create(),H=t.create(),W=t.create(),G=e.create(),k=e.create(),j=t.create(),$=t.create(),Z={x:0,y:0,z:0},Q={x:0,y:0},K={xmin:0,xmax:0,ymin:0,ymax:0,zmin:0,zmax:0},J=!0,tt=0,et=!1,nt=null,rt=null,at=[],it=[],st=[],ot=[],ht=null,lt=null,ut=null;class ct{constructor(t,e,n,r,a,i){this.diffuse=t,this.emissive=e,this.specular=n,this.shininess=r,this.metallic=a,this.fresnel0=i}setUniform(t,e){let n=n=>s.getUniformLocation(t,"Materials["+e+"]."+n);s.uniform4fv(n("diffuse"),new Float32Array(this.diffuse)),s.uniform4fv(n("emissive"),new Float32Array(this.emissive)),s.uniform4fv(n("specular"),new Float32Array(this.specular)),s.uniform4f(n("parameters"),this.shininess,this.metallic,this.fresnel0,0)}}class ft{constructor(t,e){this.direction=t,this.color=e}setUniform(t,e){const n=n=>s.getUniformLocation(t,"Lights["+e+"]."+n);s.uniform3fv(n("direction"),new Float32Array(this.direction)),s.uniform3fv(n("color"),new Float32Array(this.color))}}function mt(t=!1){const e=s.getParameter(s.MAX_VERTEX_UNIFORM_VECTORS);u=Math.floor((e-14)/4),p=Math.min(Math.max(p,M.length),u);const n=["NORMAL"],r=["NORMAL","COLOR","TRANSPARENT"];t&&(n.push("USE_IBL"),r.push("USE_IBL")),_e=zt(["WIDTH"]),Ve=zt(n),Ye=zt(["NORMAL","COLOR"]),De=zt(r)}function dt(){s.deleteProgram(De),s.deleteProgram(Ye),s.deleteProgram(Ve),s.deleteProgram(_e)}function Mt(){const t=window.top.document,e=i.webgl2?t.asygl2[o]:t.asygl[o],n={gl:s,nlights:d.length,Nmaterials:p,maxMaterials:u,pixelShader:_e,materialShader:Ve,colorShader:Ye,transparentShader:De};Object.assign(e,n)}function vt(t,e){let n;return i.webgl2&&(n=t.getContext("webgl2",{alpha:e}),i.embedded&&!n)?(i.webgl2=!1,i.ibl=!1,pt(!1),null):(n||(i.webgl2=!1,i.ibl=!1,n=t.getContext("webgl",{alpha:e})),n||alert("Could not initialize WebGL"),n)}function pt(t=!0){if(i.ibl&&(i.webgl2=!0),o=i.background[3]<1,i.embedded){const e=window.top.document;t&&(l=i.canvas.getContext("2d")),h=i.webgl2?e.offscreen2:e.offscreen,h||(h=e.createElement("canvas"),i.webgl2?e.offscreen2=h:e.offscreen=h),i.webgl2?e.asygl2||(e.asygl2=Array(2)):e.asygl||(e.asygl=Array(2)),function(){let t=window.top.document;const e=i.webgl2?t.asygl2:t.asygl;if(e[o]&&e[o].gl)!function(){const t=window.top.document;let e=i.webgl2?t.asygl2[o]:t.asygl[o];s=e.gl,v=e.nlights,p=e.Nmaterials,u=e.maxMaterials,_e=e.pixelShader,Ve=e.materialShader,Ye=e.colorShader,De=e.transparentShader}(),(d.length!=v||Math.min(M.length,u)>p)&&(mt(),Mt());else{const e=vt(h,o);if(!e)return;s=e,mt(),i.webgl2?t.asygl2[o]={}:t.asygl[o]={},Mt()}}()}else s=vt(i.canvas,o),mt();_=s.getExtension("OES_element_index_uint"),V=s.TRIANGLES,Y=new wt(s.POINTS),D=new wt(s.LINES),B=new wt,U=new wt,q=new wt,F=new wt}function gt(t,e,n,r=[]){let a=i.webgl2?"300 es":"100",s=Array(...r),o=[["nlights",0==tt?d.length:0],["Nmaterials",p]],h=[["int","Nlights",Math.max(d.length,1)]];i.webgl2&&s.push("WEBGL2"),i.ibl&&o.push(["ROUGHNESS_STEP_COUNT",8..toFixed(2)]);const l=o.map(t=>`#define ${t[0]} ${t[1]}`).join("\n"),u=s.map(t=>`#define ${t}`).join("\n"),c=h.map(t=>`const ${t[0]} ${t[1]}=${t[2]};`).join("\n"),f=`#version ${a}\n${[].map(t=>`#extension ${t}: enable`).join("\n")}\n${u}\n${c}\n${l}\n\n\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n  \n${e}\n  `;let m=t.createShader(n);return t.shaderSource(m,f),t.compileShader(m),t.getShaderParameter(m,t.COMPILE_STATUS)?m:(alert(t.getShaderInfoLog(m)),null)}function bt(t,e,n,r=s.ARRAY_BUFFER){return t.length>0&&(0==e&&(e=s.createBuffer(),n=!0),s.bindBuffer(r,e),n&&s.bufferData(r,t,s.STATIC_DRAW)),e}function xt(t,e,n=t.indices){if(0==t.indices.length)return;let r=e!=_e;!function(t,e){let n=e==_e;s.useProgram(e),s.enableVertexAttribArray(Bt),n&&s.enableVertexAttribArray(Ct);let r=!n&&d.length>0;if(r&&s.enableVertexAttribArray(Ut),s.enableVertexAttribArray(qt),e.projViewMatUniform=s.getUniformLocation(e,"projViewMat"),e.viewMatUniform=s.getUniformLocation(e,"viewMat"),e.normMatUniform=s.getUniformLocation(e,"normMat"),e.orthographicUniform=s.getUniformLocation(e,"orthographic"),(e==Ye||e==De)&&s.enableVertexAttribArray(Ft),r)for(let t=0;t<d.length;++t)d[t].setUniform(e,t);for(let n=0;n<t.materials.length;++n)t.materials[n].setUniform(e,n);s.uniformMatrix4fv(e.projViewMatUniform,!1,W),s.uniformMatrix4fv(e.viewMatUniform,!1,H),s.uniformMatrix3fv(e.normMatUniform,!1,G),s.uniform1i(e.orthographicUniform,1,i.orthographic)}(t,e),null!=lt&&(s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,ut),s.uniform1i(s.getUniformLocation(e,"reflBRDFSampler"),0),s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,lt),s.uniform1i(s.getUniformLocation(e,"diffuseSampler"),1),s.activeTexture(s.TEXTURE2),s.bindTexture(s.TEXTURE_2D,ht),s.uniform1i(s.getUniformLocation(e,"reflImgSampler"),2));let a=J||t.partial||!t.rendered;t.verticesBuffer=bt(new Float32Array(t.vertices),t.verticesBuffer,a),s.vertexAttribPointer(Bt,3,s.FLOAT,!1,r?24:16,0),r?d.length>0&&s.vertexAttribPointer(Ut,3,s.FLOAT,!1,24,12):s.vertexAttribPointer(Ct,1,s.FLOAT,!1,16,12),t.materialsBuffer=bt(new Int16Array(t.materialIndices),t.materialsBuffer,a),s.vertexAttribPointer(qt,1,s.SHORT,!1,2,0),e!=Ye&&e!=De||(t.colorsBuffer=bt(new Float32Array(t.colors),t.colorsBuffer,a),s.vertexAttribPointer(Ft,4,s.FLOAT,!0,0,0)),t.indicesBuffer=bt(_?new Uint32Array(n):new Uint16Array(n),t.indicesBuffer,a,s.ELEMENT_ARRAY_BUFFER),t.rendered=!0,s.drawElements(r?tt?s.LINES:t.type:s.POINTS,n.length,_?s.UNSIGNED_INT:s.UNSIGNED_SHORT,0)}class wt{constructor(t=V){this.type=t,this.verticesBuffer=0,this.materialsBuffer=0,this.colorsBuffer=0,this.indicesBuffer=0,this.rendered=!1,this.partial=!1,this.vertices=[],this.materialIndices=[],this.colors=[],this.indices=[],this.materials=[],this.materialTable=[],this.nvertices=0,this.clear()}clear(){this.vertices.length=0,this.materialIndices=[],this.colors=[],this.indices=[],this.nvertices=0,this.materials=[],this.materialTable=[]}vertex(t,e){return this.vertices.push(t[0]),this.vertices.push(t[1]),this.vertices.push(t[2]),this.vertices.push(e[0]),this.vertices.push(e[1]),this.vertices.push(e[2]),this.materialIndices.push(C),this.nvertices++}Vertex(t,e,n=[0,0,0,0]){return this.vertices.push(t[0]),this.vertices.push(t[1]),this.vertices.push(t[2]),this.vertices.push(e[0]),this.vertices.push(e[1]),this.vertices.push(e[2]),this.materialIndices.push(C),this.colors.push(n[0]),this.colors.push(n[1]),this.colors.push(n[2]),this.colors.push(n[3]),this.nvertices++}vertex0(t,e){return this.vertices.push(t[0]),this.vertices.push(t[1]),this.vertices.push(t[2]),this.vertices.push(e),this.materialIndices.push(C),this.nvertices++}iVertex(t,e,n,r,a=[0,0,0,0]){let i=6*t;this.vertices[i]=e[0],this.vertices[i+1]=e[1],this.vertices[i+2]=e[2],this.vertices[i+3]=n[0],this.vertices[i+4]=n[1],this.vertices[i+5]=n[2],this.materialIndices[t]=C;let s=4*t;this.colors[s]=a[0],this.colors[s+1]=a[1],this.colors[s+2]=a[2],this.colors[s+3]=a[3],r&&this.indices.push(t)}append(t){Rt(this.vertices,t.vertices),Rt(this.materialIndices,t.materialIndices),Rt(this.colors,t.colors),function(t,e,n){let r=t.length,a=e.length;t.length+=e.length;for(let i=0;i<a;++i)t[r+i]=e[i]+n}(this.indices,t.indices,this.nvertices),this.nvertices+=t.nvertices}}function Rt(t,e){let n=t.length,r=e.length;t.length+=r;for(let a=0;a<r;++a)t[n+a]=e[a]}class At{constructor(){this.data=new wt,this.Onscreen=!1,this.m=[]}offscreen(t){let e=W,n=t[0],r=n[0],a=n[1],i=n[2],s=1/(e[3]*r+e[7]*a+e[11]*i+e[15]);this.x=this.X=(e[0]*r+e[4]*a+e[8]*i+e[12])*s,this.y=this.Y=(e[1]*r+e[5]*a+e[9]*i+e[13])*s;for(let n=1,r=t.length;n<r;++n){let r=t[n],a=r[0],i=r[1],s=r[2],o=1/(e[3]*a+e[7]*i+e[11]*s+e[15]),h=(e[0]*a+e[4]*i+e[8]*s+e[12])*o,l=(e[1]*a+e[5]*i+e[9]*s+e[13])*o;h<this.x?this.x=h:h>this.X&&(this.X=h),l<this.y?this.y=l:l>this.Y&&(this.Y=l)}return(this.X<-1.01||this.x>1.01||this.Y<-1.01||this.y>1.01)&&(this.Onscreen=!1,!0)}T(t){let e=this.c[0],n=this.c[1],r=this.c[2],a=t[0]-e,i=t[1]-n,s=t[2]-r;return[a*G[0]+i*G[3]+s*G[6]+e,a*G[1]+i*G[4]+s*G[7]+n,a*G[2]+i*G[5]+s*G[8]+r]}Tcorners(t,e){return[this.T(t),this.T([t[0],t[1],e[2]]),this.T([t[0],e[1],t[2]]),this.T([t[0],e[1],e[2]]),this.T([e[0],t[1],t[2]]),this.T([e[0],t[1],e[2]]),this.T([e[0],e[1],t[2]]),this.T(e)]}setMaterial(t,e){null==t.materialTable[this.MaterialIndex]&&(t.materials.length>=p&&(t.partial=!0,e()),t.materialTable[this.MaterialIndex]=t.materials.length,t.materials.push(M[this.MaterialIndex])),C=t.materialTable[this.MaterialIndex]}render(){let t,e;if(this.setMaterialIndex(),this.transform){t=this.transform(this.controlpoints);let e=Tt(t);if(this.epsilon=e*Number.EPSILON,this.haveBounds)[this.Min,this.Max]=this.transform([this.Min,this.Max]);else{let n=Math.sqrt(1e3*Number.EPSILON*e);[this.Min,this.Max]=this.Bounds(t,n)}}else t=this.controlpoints;var n,r;if(0==this.CenterIndex?(n=this.Min,r=this.Max,e=[n,[n[0],n[1],r[2]],[n[0],r[1],n[2]],[n[0],r[1],r[2]],[r[0],n[1],n[2]],[r[0],n[1],r[2]],[r[0],r[1],n[2]],r]):(this.c=i.Centers[this.CenterIndex-1],e=this.Tcorners(this.Min,this.Max)),this.offscreen(e))return this.data.clear(),void this.notRendered();let a;if(0==this.CenterIndex){if(!J&&this.Onscreen)return void this.append();a=t}else{let e=t.length;a=Array(e);for(let n=0;n<e;++n)a[n]=this.T(t[n])}let s=i.orthographic?1:this.Min[2]/i.maxBound[2],o=.75*Math.hypot(s*(K.xmax-K.xmin),s*(K.ymax-K.ymin))/S;this.res2=o*o,this.Epsilon=.1*o,this.data.clear(),this.notRendered(),this.Onscreen=!0,this.process(a)}}function Et(t,e){let n=t[0],r=t.length;for(let a=1;a<r;++a)n=e(n,t[a]);return n}function Tt(t){let e=t[0],n=0,r=t.length;for(let a=1;a<r;++a)n=Math.max(n,kt([t[a][0]-e[0],t[a][1]-e[1],t[a][2]-e[2]]));return n}class yt extends At{constructor(t,e,n,r=null,a=null,i=null,s=null,o=null){super(),this.controlpoints=t,this.CenterIndex=e,this.MaterialIndex=n,this.Color=r,this.Min=a,this.Max=i,this.geometryTransform=s,this.colorTransform=o;const h=t.length;if(r){let t=r[0][3]+r[1][3]+r[2][3];this.transparent=16==h||4==h?t+r[3][3]<4:t<3}else this.transparent=M[n].diffuse[3]<1;if(r&&(this.color=[...r]),this.vertex=this.transparent?this.data.Vertex.bind(this.data):this.data.vertex.bind(this.data),this.haveBounds=a&&i,this.Min=a,this.Max=i,this.transform=s,!this.haveBounds&&null==s){let e=Tt(t),n=Math.sqrt(1e3*Number.EPSILON*e);this.epsilon=e*Number.EPSILON,[this.Min,this.Max]=this.Bounds(t,n)}}setMaterialIndex(){this.transparent?this.setMaterial(q,Xe):this.color?this.setMaterial(U,Ce):this.setMaterial(B,Fe)}cornerbound(t,e){let n=e(t[0],t[3]);return n=e(n,t[12]),e(n,t[15])}controlbound(t,e){let n=e(t[1],t[2]);return n=e(n,t[4]),n=e(n,t[5]),n=e(n,t[6]),n=e(n,t[7]),n=e(n,t[8]),n=e(n,t[9]),n=e(n,t[10]),n=e(n,t[11]),n=e(n,t[13]),e(n,t[14])}bound(t,e,n,r,a){if(n=e(n,this.cornerbound(t,e)),e(-1,1)*(n-this.controlbound(t,e))>=-r||0==a)return n;--a,r*=2;const i=new Xt(t[0],t[1],t[2],t[3]),s=new Xt(t[4],t[5],t[6],t[7]),o=new Xt(t[8],t[9],t[10],t[11]),h=new Xt(t[12],t[13],t[14],t[15]),l=new Xt(t[0],t[4],t[8],t[12]),u=new Xt(i.m0,s.m0,o.m0,h.m0),c=new Xt(i.m3,s.m3,o.m3,h.m3),f=new Xt(i.m5,s.m5,o.m5,h.m5),m=new Xt(i.m4,s.m4,o.m4,h.m4),d=new Xt(i.m2,s.m2,o.m2,h.m2),M=new Xt(t[3],t[7],t[11],t[15]),v=[t[0],i.m0,i.m3,i.m5,l.m0,u.m0,c.m0,f.m0,l.m3,u.m3,c.m3,f.m3,l.m5,u.m5,c.m5,f.m5];n=this.bound(v,e,n,r,a);const p=[l.m5,u.m5,c.m5,f.m5,l.m4,u.m4,c.m4,f.m4,l.m2,u.m2,c.m2,f.m2,t[12],h.m0,h.m3,h.m5];n=this.bound(p,e,n,r,a);const g=[f.m5,m.m5,d.m5,M.m5,f.m4,m.m4,d.m4,M.m4,f.m2,m.m2,d.m2,M.m2,h.m5,h.m4,h.m2,t[15]];n=this.bound(g,e,n,r,a);const b=[i.m5,i.m4,i.m2,t[3],f.m0,m.m0,d.m0,M.m0,f.m3,m.m3,d.m3,M.m3,f.m5,m.m5,d.m5,M.m5];return this.bound(b,e,n,r,a)}cornerboundtri(t,e){let n=e(t[0],t[6]);return e(n,t[9])}controlboundtri(t,e){let n=e(t[1],t[2]);return n=e(n,t[3]),n=e(n,t[4]),n=e(n,t[5]),n=e(n,t[7]),e(n,t[8])}boundtri(t,e,n,r,a){if(n=e(n,this.cornerboundtri(t,e)),e(-1,1)*(n-this.controlboundtri(t,e))>=-r||0==a)return n;--a,r*=2;let i=new Wt(t),s=[i.l003,i.l102,i.l012,i.l201,i.l111,i.l021,i.l300,i.l210,i.l120,i.l030];n=this.boundtri(s,e,n,r,a);let o=[i.l300,i.r102,i.r012,i.r201,i.r111,i.r021,i.r300,i.r210,i.r120,i.r030];n=this.boundtri(o,e,n,r,a);let h=[i.l030,i.u102,i.u012,i.u201,i.u111,i.u021,i.r030,i.u210,i.u120,i.u030];n=this.boundtri(h,e,n,r,a);let l=[i.r030,i.u201,i.r021,i.u102,i.c111,i.r012,i.l030,i.l120,i.l210,i.l300];return this.boundtri(l,e,n,r,a)}Bound(t,e,n){let r=Array(3),a=t.length,i=Array(a);for(let s=0;s<3;++s){for(let e=0;e<a;++e)i[e]=t[e][s];r[s]=16==a?this.bound(i,e,i[0],n,w):10==a?this.boundtri(i,e,i[0],n,w):Et(i,e)}return[r[0],r[1],r[2]]}Bounds(t,e){return[this.Bound(t,Math.min,e),this.Bound(t,Math.max,e)]}processTriangle(t){let e=t[0],n=t[1],r=t[2],a=Gt($t([n[0]-e[0],n[1]-e[1],n[2]-e[2]],[r[0]-e[0],r[1]-e[1],r[2]-e[2]]));if(!this.offscreen([e,n,r])){let t,i,s;this.color?(t=this.data.Vertex(e,a,this.color[0]),i=this.data.Vertex(n,a,this.color[1]),s=this.data.Vertex(r,a,this.color[2])):(t=this.vertex(e,a),i=this.vertex(n,a),s=this.vertex(r,a)),0==tt?(this.data.indices.push(t),this.data.indices.push(i),this.data.indices.push(s)):(this.data.indices.push(t),this.data.indices.push(i),this.data.indices.push(i),this.data.indices.push(s),this.data.indices.push(s),this.data.indices.push(t)),this.append()}}processQuad(t){let e=t[0],n=t[1],r=t[2],a=t[3],i=$t([n[0]-e[0],n[1]-e[1],n[2]-e[2]],[r[0]-n[0],r[1]-n[1],r[2]-n[2]]),s=$t([r[0]-a[0],r[1]-a[1],r[2]-a[2]],[a[0]-e[0],a[1]-e[1],a[2]-e[2]]),o=Gt([i[0]+s[0],i[1]+s[1],i[2]+s[2]]);if(!this.offscreen([e,n,r,a])){let t,i,s,h;this.color?(t=this.data.Vertex(e,o,this.color[0]),i=this.data.Vertex(n,o,this.color[1]),s=this.data.Vertex(r,o,this.color[2]),h=this.data.Vertex(a,o,this.color[3])):(t=this.vertex(e,o),i=this.vertex(n,o),s=this.vertex(r,o),h=this.vertex(a,o)),0==tt?(this.data.indices.push(t),this.data.indices.push(i),this.data.indices.push(s),this.data.indices.push(t),this.data.indices.push(s),this.data.indices.push(h)):(this.data.indices.push(t),this.data.indices.push(i),this.data.indices.push(i),this.data.indices.push(s),this.data.indices.push(s),this.data.indices.push(h),this.data.indices.push(h),this.data.indices.push(t)),this.append()}}curve(t,e,n,r,a){new Pt([t[e],t[n],t[r],t[a]],0,C,this.Min,this.Max).render()}process(t){if(this.transparent&&1!=tt&&(C=this.color?-1-C:1+C),10==t.length)return this.process3(t);if(3==t.length)return this.processTriangle(t);if(4==t.length)return this.processQuad(t);if(this.color&&this.colorTransform&&(this.color=this.colorTransform(this.Color,t)),1==tt)return this.curve(t,0,4,8,12),this.curve(t,12,13,14,15),this.curve(t,15,11,7,3),void this.curve(t,3,2,1,0);let e=t[0],n=t[3],r=t[12],a=t[15],i=this.normal(n,t[2],t[1],e,t[4],t[8],r);kt(i)<this.epsilon&&(i=this.normal(n,t[2],t[1],e,t[13],t[14],a),kt(i)<this.epsilon&&(i=this.normal(a,t[11],t[7],n,t[4],t[8],r)));let s=this.normal(e,t[4],t[8],r,t[13],t[14],a);kt(s)<this.epsilon&&(s=this.normal(e,t[4],t[8],r,t[11],t[7],n),kt(s)<this.epsilon&&(s=this.normal(n,t[2],t[1],e,t[13],t[14],a)));let o=this.normal(r,t[13],t[14],a,t[11],t[7],n);kt(o)<this.epsilon&&(o=this.normal(r,t[13],t[14],a,t[2],t[1],e),kt(o)<this.epsilon&&(o=this.normal(e,t[4],t[8],r,t[11],t[7],n)));let h=this.normal(a,t[11],t[7],n,t[2],t[1],e);if(kt(h)<this.epsilon&&(h=this.normal(a,t[11],t[7],n,t[4],t[8],r),kt(h)<this.epsilon&&(h=this.normal(r,t[13],t[14],a,t[2],t[1],e))),this.color){let l=this.color[0],u=this.color[1],c=this.color[2],f=this.color[3],m=this.data.Vertex(e,i,l),d=this.data.Vertex(r,s,u),M=this.data.Vertex(a,o,c),v=this.data.Vertex(n,h,f);this.Render(t,m,d,M,v,e,r,a,n,!1,!1,!1,!1,l,u,c,f)}else{let l=this.vertex(e,i),u=this.vertex(r,s),c=this.vertex(a,o),f=this.vertex(n,h);this.Render(t,l,u,c,f,e,r,a,n,!1,!1,!1,!1)}this.data.indices.length>0&&this.append()}append(){this.transparent?q.append(this.data):this.color?U.append(this.data):B.append(this.data)}notRendered(){this.transparent?q.rendered=!1:this.color?U.rendered=!1:B.rendered=!1}Render(t,e,n,r,a,i,s,o,h,l,u,c,f,m=null,d=null,M=null,v=null){let p=this.Distance(t);if(p[0]<this.res2&&p[1]<this.res2)this.offscreen([i,s,o])||(0==tt?(this.data.indices.push(e),this.data.indices.push(n),this.data.indices.push(r)):(this.data.indices.push(e),this.data.indices.push(n),this.data.indices.push(n),this.data.indices.push(r))),this.offscreen([i,o,h])||(0==tt?(this.data.indices.push(e),this.data.indices.push(r),this.data.indices.push(a)):(this.data.indices.push(r),this.data.indices.push(a),this.data.indices.push(a),this.data.indices.push(e)));else{if(this.offscreen(t))return;let g=t[0],b=t[3],x=t[12],w=t[15];if(p[0]<this.res2){let p=new Ht(g,t[1],t[2],b),R=new Ht(t[4],t[5],t[6],t[7]),A=new Ht(t[8],t[9],t[10],t[11]),E=new Ht(x,t[13],t[14],w),T=[g,p.m0,p.m3,p.m5,t[4],R.m0,R.m3,R.m5,t[8],A.m0,A.m3,A.m5,x,E.m0,E.m3,E.m5],y=[p.m5,p.m4,p.m2,b,R.m5,R.m4,R.m2,t[7],A.m5,A.m4,A.m2,t[11],E.m5,E.m4,E.m2,w],I=this.normal(T[12],T[13],T[14],T[15],T[11],T[7],T[3]);kt(I)<=this.epsilon&&(I=this.normal(T[12],T[13],T[14],T[15],T[2],T[1],T[0]),kt(I)<=this.epsilon&&(I=this.normal(T[0],T[4],T[8],T[12],T[11],T[7],T[3])));let L=this.normal(y[3],y[2],y[1],y[0],y[4],y[8],y[12]);kt(L)<=this.epsilon&&(L=this.normal(y[3],y[2],y[1],y[0],y[13],y[14],y[15]),kt(L)<=this.epsilon&&(L=this.normal(y[15],y[11],y[7],y[3],y[4],y[8],y[12])));let N=this.Epsilon,P=[.5*(s[0]+o[0]),.5*(s[1]+o[1]),.5*(s[2]+o[2])];if(!u)if(u=te(x,t[13],t[14],w)<this.res2){let t=Gt(this.differential(y[12],y[8],y[4],y[0]));P=[P[0]-N*t[0],P[1]-N*t[1],P[2]-N*t[2]]}else P=T[15];let S=[.5*(h[0]+i[0]),.5*(h[1]+i[1]),.5*(h[2]+i[2])];if(!f)if(f=te(g,t[1],t[2],b)<this.res2){let t=Gt(this.differential(T[3],T[7],T[11],T[15]));S=[S[0]-N*t[0],S[1]-N*t[1],S[2]-N*t[2]]}else S=y[0];if(m){let t=Array(4),p=Array(4);for(let e=0;e<4;++e)t[e]=.5*(d[e]+M[e]),p[e]=.5*(v[e]+m[e]);let g=this.data.Vertex(P,I,t),b=this.data.Vertex(S,L,p);this.Render(T,e,n,g,b,i,s,P,S,l,u,!1,f,m,d,t,p),this.Render(y,b,g,r,a,S,P,o,h,!1,u,c,f,p,t,M,v)}else{let t=this.vertex(P,I),m=this.vertex(S,L);this.Render(T,e,n,t,m,i,s,P,S,l,u,!1,f),this.Render(y,m,t,r,a,S,P,o,h,!1,u,c,f)}return}if(p[1]<this.res2){let p=new Ht(g,t[4],t[8],x),R=new Ht(t[1],t[5],t[9],t[13]),A=new Ht(t[2],t[6],t[10],t[14]),E=new Ht(b,t[7],t[11],w),T=[g,t[1],t[2],b,p.m0,R.m0,A.m0,E.m0,p.m3,R.m3,A.m3,E.m3,p.m5,R.m5,A.m5,E.m5],y=[p.m5,R.m5,A.m5,E.m5,p.m4,R.m4,A.m4,E.m4,p.m2,R.m2,A.m2,E.m2,x,t[13],t[14],w],I=this.normal(T[0],T[4],T[8],T[12],T[13],T[14],T[15]);kt(I)<=this.epsilon&&(I=this.normal(T[0],T[4],T[8],T[12],T[11],T[7],T[3]),kt(I)<=this.epsilon&&(I=this.normal(T[3],T[2],T[1],T[0],T[13],T[14],T[15])));let L=this.normal(y[15],y[11],y[7],y[3],y[2],y[1],y[0]);kt(L)<=this.epsilon&&(L=this.normal(y[15],y[11],y[7],y[3],y[4],y[8],y[12]),kt(L)<=this.epsilon&&(L=this.normal(y[12],y[13],y[14],y[15],y[2],y[1],y[0])));let N=this.Epsilon,P=[.5*(i[0]+s[0]),.5*(i[1]+s[1]),.5*(i[2]+s[2])];if(!l)if(l=te(g,t[4],t[8],x)<this.res2){let t=Gt(this.differential(y[0],y[1],y[2],y[3]));P=[P[0]-N*t[0],P[1]-N*t[1],P[2]-N*t[2]]}else P=T[12];let S=[.5*(o[0]+h[0]),.5*(o[1]+h[1]),.5*(o[2]+h[2])];if(!c)if(c=te(w,t[11],t[7],b)<this.res2){let t=Gt(this.differential(T[15],T[14],T[13],T[12]));S=[S[0]-N*t[0],S[1]-N*t[1],S[2]-N*t[2]]}else S=y[3];if(m){let t=Array(4),p=Array(4);for(let e=0;e<4;++e)t[e]=.5*(m[e]+d[e]),p[e]=.5*(M[e]+v[e]);let g=this.data.Vertex(P,I,t),b=this.data.Vertex(S,L,p);this.Render(T,e,g,b,a,i,P,S,h,l,!1,c,f,m,t,p,v),this.Render(y,g,n,r,b,P,s,o,S,l,u,c,!1,t,d,M,p)}else{let t=this.vertex(P,I),m=this.vertex(S,L);this.Render(T,e,t,m,a,i,P,S,h,l,!1,c,f),this.Render(y,t,n,r,m,P,s,o,S,l,u,c,!1)}return}let R=new Ht(g,t[1],t[2],b),A=new Ht(t[4],t[5],t[6],t[7]),E=new Ht(t[8],t[9],t[10],t[11]),T=new Ht(x,t[13],t[14],w),y=new Ht(g,t[4],t[8],x),I=new Ht(R.m0,A.m0,E.m0,T.m0),L=new Ht(R.m3,A.m3,E.m3,T.m3),N=new Ht(R.m5,A.m5,E.m5,T.m5),P=new Ht(R.m4,A.m4,E.m4,T.m4),S=new Ht(R.m2,A.m2,E.m2,T.m2),O=new Ht(b,t[7],t[11],w),_=[g,R.m0,R.m3,R.m5,y.m0,I.m0,L.m0,N.m0,y.m3,I.m3,L.m3,N.m3,y.m5,I.m5,L.m5,N.m5],V=[y.m5,I.m5,L.m5,N.m5,y.m4,I.m4,L.m4,N.m4,y.m2,I.m2,L.m2,N.m2,x,T.m0,T.m3,T.m5],Y=[N.m5,P.m5,S.m5,O.m5,N.m4,P.m4,S.m4,O.m4,N.m2,P.m2,S.m2,O.m2,T.m5,T.m4,T.m2,w],D=[R.m5,R.m4,R.m2,b,N.m0,P.m0,S.m0,O.m0,N.m3,P.m3,S.m3,O.m3,N.m5,P.m5,S.m5,O.m5],B=_[15],U=this.normal(_[0],_[4],_[8],_[12],_[13],_[14],_[15]);kt(U)<this.epsilon&&(U=this.normal(_[0],_[4],_[8],_[12],_[11],_[7],_[3]),kt(U)<this.epsilon&&(U=this.normal(_[3],_[2],_[1],_[0],_[13],_[14],_[15])));let q=this.normal(V[12],V[13],V[14],V[15],V[11],V[7],V[3]);kt(q)<this.epsilon&&(q=this.normal(V[12],V[13],V[14],V[15],V[2],V[1],V[0]),kt(q)<this.epsilon&&(q=this.normal(V[0],V[4],V[8],V[12],V[11],V[7],V[3])));let F=this.normal(Y[15],Y[11],Y[7],Y[3],Y[2],Y[1],Y[0]);kt(F)<this.epsilon&&(F=this.normal(Y[15],Y[11],Y[7],Y[3],Y[4],Y[8],Y[12]),kt(F)<this.epsilon&&(F=this.normal(Y[12],Y[13],Y[14],Y[15],Y[2],Y[1],Y[0])));let C=this.normal(D[3],D[2],D[1],D[0],D[4],D[8],D[12]);kt(C)<this.epsilon&&(C=this.normal(D[3],D[2],D[1],D[0],D[13],D[14],D[15]),kt(C)<this.epsilon&&(C=this.normal(D[15],D[11],D[7],D[3],D[4],D[8],D[12])));let z=this.normal(Y[3],Y[2],Y[1],B,Y[4],Y[8],Y[12]),X=this.Epsilon,H=[.5*(i[0]+s[0]),.5*(i[1]+s[1]),.5*(i[2]+s[2])];if(!l)if(l=te(g,t[4],t[8],x)<this.res2){let t=Gt(this.differential(V[0],V[1],V[2],V[3]));H=[H[0]-X*t[0],H[1]-X*t[1],H[2]-X*t[2]]}else H=_[12];let W=[.5*(s[0]+o[0]),.5*(s[1]+o[1]),.5*(s[2]+o[2])];if(!u)if(u=te(x,t[13],t[14],w)<this.res2){let t=Gt(this.differential(Y[12],Y[8],Y[4],Y[0]));W=[W[0]-X*t[0],W[1]-X*t[1],W[2]-X*t[2]]}else W=V[15];let G=[.5*(o[0]+h[0]),.5*(o[1]+h[1]),.5*(o[2]+h[2])];if(!c)if(c=te(w,t[11],t[7],b)<this.res2){let t=Gt(this.differential(D[15],D[14],D[13],D[12]));G=[G[0]-X*t[0],G[1]-X*t[1],G[2]-X*t[2]]}else G=Y[3];let k=[.5*(h[0]+i[0]),.5*(h[1]+i[1]),.5*(h[2]+i[2])];if(!f)if(f=te(g,t[1],t[2],b)<this.res2){let t=Gt(this.differential(_[3],_[7],_[11],_[15]));k=[k[0]-X*t[0],k[1]-X*t[1],k[2]-X*t[2]]}else k=D[0];if(m){let t=Array(4),p=Array(4),g=Array(4),b=Array(4),x=Array(4);for(let e=0;e<4;++e)t[e]=.5*(m[e]+d[e]),p[e]=.5*(d[e]+M[e]),g[e]=.5*(M[e]+v[e]),b[e]=.5*(v[e]+m[e]),x[e]=.5*(t[e]+g[e]);let w=this.data.Vertex(H,U,t),R=this.data.Vertex(W,q,p),A=this.data.Vertex(G,F,g),E=this.data.Vertex(k,C,b),T=this.data.Vertex(B,z,x);this.Render(_,e,w,T,E,i,H,B,k,l,!1,!1,f,m,t,x,b),this.Render(V,w,n,R,T,H,s,W,B,l,u,!1,!1,t,d,p,x),this.Render(Y,T,R,r,A,B,W,o,G,!1,u,c,!1,x,p,M,g),this.Render(D,E,T,A,a,k,B,G,h,!1,!1,c,f,b,x,g,v)}else{let t=this.vertex(H,U),m=this.vertex(W,q),d=this.vertex(G,F),M=this.vertex(k,C),v=this.vertex(B,z);this.Render(_,e,t,v,M,i,H,B,k,l,!1,!1,f),this.Render(V,t,n,m,v,H,s,W,B,l,u,!1,!1),this.Render(Y,v,m,r,d,B,W,o,G,!1,u,c,!1),this.Render(D,M,v,d,a,k,B,G,h,!1,!1,c,f)}}}process3(t){if(1==tt)return this.curve(t,0,1,3,6),this.curve(t,6,7,8,9),void this.curve(t,9,5,2,0);let e=t[0],n=t[6],r=t[9],a=this.normal(r,t[5],t[2],e,t[1],t[3],n),i=this.normal(e,t[1],t[3],n,t[7],t[8],r),s=this.normal(n,t[7],t[8],r,t[5],t[2],e);if(this.color){let o=this.color[0],h=this.color[1],l=this.color[2],u=this.data.Vertex(e,a,o),c=this.data.Vertex(n,i,h),f=this.data.Vertex(r,s,l);this.Render3(t,u,c,f,e,n,r,!1,!1,!1,o,h,l)}else{let o=this.vertex(e,a),h=this.vertex(n,i),l=this.vertex(r,s);this.Render3(t,o,h,l,e,n,r,!1,!1,!1)}this.data.indices.length>0&&this.append()}Render3(t,e,n,r,a,i,s,o,h,l,u=null,c=null,f=null){if(this.Distance3(t)<this.res2)this.offscreen([a,i,s])||(0==tt?(this.data.indices.push(e),this.data.indices.push(n),this.data.indices.push(r)):(this.data.indices.push(e),this.data.indices.push(n),this.data.indices.push(n),this.data.indices.push(r),this.data.indices.push(r),this.data.indices.push(e)));else{if(this.offscreen(t))return;let m=t[0],d=t[1],M=t[2],v=t[3],p=t[4],g=t[5],b=t[6],x=t[7],w=t[8],R=t[9],A=[.5*(R[0]+g[0]),.5*(R[1]+g[1]),.5*(R[2]+g[2])],E=[.5*(R[0]+w[0]),.5*(R[1]+w[1]),.5*(R[2]+w[2])],T=[.5*(g[0]+M[0]),.5*(g[1]+M[1]),.5*(g[2]+M[2])],y=[.5*(w[0]+p[0]),.5*(w[1]+p[1]),.5*(w[2]+p[2])],I=[.5*(w[0]+x[0]),.5*(w[1]+x[1]),.5*(w[2]+x[2])],L=[.5*(M[0]+p[0]),.5*(M[1]+p[1]),.5*(M[2]+p[2])],N=[.5*(M[0]+m[0]),.5*(M[1]+m[1]),.5*(M[2]+m[2])],P=[.5*(p[0]+v[0]),.5*(p[1]+v[1]),.5*(p[2]+v[2])],S=[.5*(x[0]+b[0]),.5*(x[1]+b[1]),.5*(x[2]+b[2])],O=[.5*(m[0]+d[0]),.5*(m[1]+d[1]),.5*(m[2]+d[2])],_=[.5*(d[0]+v[0]),.5*(d[1]+v[1]),.5*(d[2]+v[2])],V=[.5*(v[0]+b[0]),.5*(v[1]+b[1]),.5*(v[2]+b[2])],Y=[.5*(A[0]+T[0]),.5*(A[1]+T[1]),.5*(A[2]+T[2])],D=[.5*(E[0]+I[0]),.5*(E[1]+I[1]),.5*(E[2]+I[2])],B=[.5*(T[0]+N[0]),.5*(T[1]+N[1]),.5*(T[2]+N[2])],U=[.5*y[0]+.25*(p[0]+d[0]),.5*y[1]+.25*(p[1]+d[1]),.5*y[2]+.25*(p[2]+d[2])],q=[.5*(I[0]+S[0]),.5*(I[1]+S[1]),.5*(I[2]+S[2])],F=[.5*L[0]+.25*(p[0]+x[0]),.5*L[1]+.25*(p[1]+x[1]),.5*L[2]+.25*(p[2]+x[2])],C=[.25*(g[0]+p[0])+.5*P[0],.25*(g[1]+p[1])+.5*P[1],.25*(g[2]+p[2])+.5*P[2]],z=[.5*(O[0]+_[0]),.5*(O[1]+_[1]),.5*(O[2]+_[2])],X=[.5*(_[0]+V[0]),.5*(_[1]+V[1]),.5*(_[2]+V[2])],H=[.5*(F[0]+z[0]),.5*(F[1]+z[1]),.5*(F[2]+z[2])],W=[.5*(F[0]+X[0]),.5*(F[1]+X[1]),.5*(F[2]+X[2])],G=[.5*(z[0]+X[0]),.5*(z[1]+X[1]),.5*(z[2]+X[2])],k=[.5*(C[0]+q[0]),.5*(C[1]+q[1]),.5*(C[2]+q[2])],j=[.5*(D[0]+C[0]),.5*(D[1]+C[1]),.5*(D[2]+C[2])],$=[.5*(D[0]+q[0]),.5*(D[1]+q[1]),.5*(D[2]+q[2])],Z=[.5*(Y[0]+U[0]),.5*(Y[1]+U[1]),.5*(Y[2]+U[2])],Q=[.5*(B[0]+U[0]),.5*(B[1]+U[1]),.5*(B[2]+U[2])],K=[.5*(Y[0]+B[0]),.5*(Y[1]+B[1]),.5*(Y[2]+B[2])],J=[m,O,N,z,[.5*(L[0]+O[0]),.5*(L[1]+O[1]),.5*(L[2]+O[2])],B,G,H,Q,K],tt=[G,X,W,V,[.5*(P[0]+S[0]),.5*(P[1]+S[1]),.5*(P[2]+S[2])],k,b,S,q,$],et=[K,Z,Y,j,[.5*(A[0]+y[0]),.5*(A[1]+y[1]),.5*(A[2]+y[2])],A,$,D,E,R],nt=[$,j,k,Z,[.25*(T[0]+I[0]+_[0]+p[0]),.25*(T[1]+I[1]+_[1]+p[1]),.25*(T[2]+I[2]+_[2]+p[2])],W,K,Q,H,G],rt=this.normal(G,W,k,$,j,Z,K),at=this.normal($,j,Z,K,Q,H,G),it=this.normal(K,Q,H,G,W,k,$),st=this.Epsilon,ot=[.5*(i[0]+s[0]),.5*(i[1]+s[1]),.5*(i[2]+s[2])];if(!o)if(o=te(b,x,w,R)<this.res2){let t=Gt(this.sumdifferential(nt[0],nt[2],nt[5],nt[9],nt[1],nt[3],nt[6]));ot=[ot[0]-st*t[0],ot[1]-st*t[1],ot[2]-st*t[2]]}else ot=$;let ht=[.5*(s[0]+a[0]),.5*(s[1]+a[1]),.5*(s[2]+a[2])];if(!h)if(h=te(m,M,g,R)<this.res2){let t=Gt(this.sumdifferential(nt[6],nt[3],nt[1],nt[0],nt[7],nt[8],nt[9]));ht=[ht[0]-st*t[0],ht[1]-st*t[1],ht[2]-st*t[2]]}else ht=K;let lt=[.5*(a[0]+i[0]),.5*(a[1]+i[1]),.5*(a[2]+i[2])];if(!l)if(l=te(m,d,v,b)<this.res2){let t=Gt(this.sumdifferential(nt[9],nt[8],nt[7],nt[6],nt[5],nt[2],nt[0]));lt=[lt[0]-st*t[0],lt[1]-st*t[1],lt[2]-st*t[2]]}else lt=G;if(u){let t=Array(4),m=Array(4),d=Array(4);for(let e=0;e<4;++e)t[e]=.5*(c[e]+f[e]),m[e]=.5*(f[e]+u[e]),d[e]=.5*(u[e]+c[e]);let M=this.data.Vertex(ot,rt,t),v=this.data.Vertex(ht,at,m),p=this.data.Vertex(lt,it,d);this.Render3(J,e,p,v,a,lt,ht,!1,h,l,u,d,m),this.Render3(tt,p,n,M,lt,i,ot,o,!1,l,d,c,t),this.Render3(et,v,M,r,ht,ot,s,o,h,!1,m,t,f),this.Render3(nt,M,v,p,ot,ht,lt,!1,!1,!1,t,m,d)}else{let t=this.vertex(ot,rt),u=this.vertex(ht,at),c=this.vertex(lt,it);this.Render3(J,e,c,u,a,lt,ht,!1,h,l),this.Render3(tt,c,n,t,lt,i,ot,o,!1,l),this.Render3(et,u,t,r,ht,ot,s,o,h,!1),this.Render3(nt,t,u,c,ot,ht,lt,!1,!1,!1)}}}Distance(t){let e=t[0],n=t[3],r=t[12],a=t[15],i=ee(e,r,n,a);i=Math.max(i,te(e,t[4],t[8],r)),i=Math.max(i,te(t[1],t[5],t[9],t[13])),i=Math.max(i,te(n,t[7],t[11],a)),i=Math.max(i,te(t[2],t[6],t[10],t[14]));let s=ee(e,n,r,a);return s=Math.max(s,te(e,t[1],t[2],n)),s=Math.max(s,te(t[4],t[5],t[6],t[7])),s=Math.max(s,te(t[8],t[9],t[10],t[11])),s=Math.max(s,te(r,t[13],t[14],a)),[i,s]}Distance3(t){let e=t[0],n=t[4],r=t[6],a=t[9],i=kt([(e[0]+r[0]+a[0])*g-n[0],(e[1]+r[1]+a[1])*g-n[1],(e[2]+r[2]+a[2])*g-n[2]]);return i=Math.max(i,te(e,t[1],t[3],r)),i=Math.max(i,te(e,t[2],t[5],a)),Math.max(i,te(r,t[7],t[8],a))}differential(t,e,n,r){let a=[3*(e[0]-t[0]),3*(e[1]-t[1]),3*(e[2]-t[2])];return kt(a)>this.epsilon?a:(a=Kt(t,e,n),kt(a)>this.epsilon?a:Jt(t,e,n,r))}sumdifferential(t,e,n,r,a,i,s){let o=this.differential(t,e,n,r),h=this.differential(t,a,i,s);return[o[0]+h[0],o[1]+h[1],o[2]+h[2]]}normal(t,e,n,r,a,i,s){let o=3*(a[0]-r[0]),h=3*(a[1]-r[1]),l=3*(a[2]-r[2]),u=3*(n[0]-r[0]),c=3*(n[1]-r[1]),f=3*(n[2]-r[2]),m=[h*f-l*c,l*u-o*f,o*c-h*u];if(kt(m)>this.epsilon)return m;let d=[u,c,f],M=[o,h,l],v=Kt(r,n,e),p=Kt(r,a,i),g=$t(p,d),b=$t(M,v);if(m=[g[0]+b[0],g[1]+b[1],g[2]+b[2]],kt(m)>this.epsilon)return m;let x=Jt(r,n,e,t),w=Jt(r,a,i,s);g=$t(M,x),b=$t(w,d);let R=$t(p,v);return m=[g[0]+b[0]+R[0],g[1]+b[1]+R[1],g[2]+b[2]+R[2]],kt(m)>this.epsilon?m:(g=$t(w,v),b=$t(p,x),m=[g[0]+b[0],g[1]+b[1],g[2]+b[2]],kt(m)>this.epsilon?m:$t(w,x))}}function It(t,e,n,r){return[r-t+3*(e-n),2*(t+n)-4*e,e-t]}function Lt(t){return 0<=t&&t<=1}class Nt{constructor(t,e,n){const r=1e3*Number.EPSILON,a=r*r;if(Math.abs(t)<=r*Math.abs(e)+a*Math.abs(n))Math.abs(e)>r*Math.abs(n)?(this.roots=1,this.t1=-n/e):0==n?(this.roots=1,this.t1=0):this.roots=0;else{let a=.5*e/t,i=e*a;if(Math.abs(i)<=r*Math.abs(n)){let e=-n/t;e>=0?(this.roots=2,this.t2=Math.sqrt(e),this.t1=-this.t2):this.roots=0}else{let t=-2*n/i;if(t>-1){this.roots=2;let e=a*function(t){return t/(Math.sqrt(1+t)+1)}(t),n=-e-2*a;n<=e?(this.t1=n,this.t2=e):(this.t1=e,this.t2=n)}else-1==t?(this.roots=1,this.t1=this.t2=-a):this.roots=0}}}}class Pt extends At{constructor(t,e,n,r=null,a=null,i=null){super(),this.controlpoints=t,this.CenterIndex=e,this.MaterialIndex=n,this.haveBounds=r&&a,this.Min=r,this.Max=a,this.transform=i,this.haveBounds||null!=i||([this.Min,this.Max]=this.Bounds(t,0))}Bounds(t,e){let n=Array(3),r=Array(3),a=t.length,i=Array(a);for(let e=0;e<3;++e){for(let n=0;n<a;++n)i[n]=t[n][e];let s,o;if(s=o=i[0],4==a){s=Math.min(s,i[3]),o=Math.max(o,i[3]);let t=It(i[0],i[1],i[2],i[3]),e=new Nt(t[0],t[1],t[2]);if(0!=e.roots&&Lt(e.t1)){let t=Zt(i[0],i[1],i[2],i[3],e.t1);s=Math.min(s,t),o=Math.max(o,t)}if(2==e.roots&&Lt(e.t2)){let t=Zt(i[0],i[1],i[2],i[3],e.t2);s=Math.min(s,t),o=Math.max(o,t)}}else{let t=i[1];s=Math.min(s,t),o=Math.max(o,t)}n[e]=s,r[e]=o}return[[n[0],n[1],n[2]],[r[0],r[1],r[2]]]}setMaterialIndex(){this.setMaterial(D,qe)}processLine(t){let e=t[0],n=t[1];if(!this.offscreen([e,n])){let t=[0,0,1];this.data.indices.push(this.data.vertex(e,t)),this.data.indices.push(this.data.vertex(n,t)),this.append()}}process(t){if(2==t.length)return this.processLine(t);let e=t[0],n=t[1],r=t[2],a=t[3],i=this.normal(Qt(e,n),Kt(e,n,r)),s=this.normal(Qt(r,a),Kt(a,r,n)),o=this.data.vertex(e,i),h=this.data.vertex(a,s);this.Render(t,o,h),this.data.indices.length>0&&this.append()}append(){D.append(this.data)}notRendered(){D.rendered=!1}Render(t,e,n){let r=t[0],a=t[1],i=t[2],s=t[3];if(te(r,a,i,s)<this.res2)this.offscreen([r,s])||(this.data.indices.push(e),this.data.indices.push(n));else{if(this.offscreen(t))return;let o=[.5*(r[0]+a[0]),.5*(r[1]+a[1]),.5*(r[2]+a[2])],h=[.5*(a[0]+i[0]),.5*(a[1]+i[1]),.5*(a[2]+i[2])],l=[.5*(i[0]+s[0]),.5*(i[1]+s[1]),.5*(i[2]+s[2])],u=[.5*(o[0]+h[0]),.5*(o[1]+h[1]),.5*(o[2]+h[2])],c=[.5*(h[0]+l[0]),.5*(h[1]+l[1]),.5*(h[2]+l[2])],f=[.5*(u[0]+c[0]),.5*(u[1]+c[1]),.5*(u[2]+c[2])],m=[r,o,u,f],d=[f,c,l,s],M=this.normal(function(t,e,n,r){return[n[0]+r[0]-t[0]-e[0],n[1]+r[1]-t[1]-e[1],n[2]+r[2]-t[2]-e[2]]}(r,a,i,s),function(t,e,n,r){return[3*t[0]-5*e[0]+n[0]+r[0],3*t[1]-5*e[1]+n[1]+r[1],3*t[2]-5*e[2]+n[2]+r[2]]}(r,a,i,s)),v=this.data.vertex(f,M);this.Render(m,e,v),this.Render(d,v,n)}}normal(t,e){let n=jt(t,t),r=jt(t,e);return[n*e[0]-r*t[0],n*e[1]-r*t[1],n*e[2]-r*t[2]]}}class St extends At{constructor(t,e,n,r=null){super(),this.controlpoint=t,this.width=e,this.MaterialIndex=n,this.CenterIndex=0,this.haveBounds=!0,this.Min=t,this.Max=t,this.transform=r,this.controlpoints=[t]}setMaterialIndex(){this.setMaterial(Y,Ue)}Bounds(t,e){return[this.Min,this.Max]}process(t){this.data.indices.push(this.data.vertex0(t[0],this.width)),this.append()}append(){Y.append(this.data)}notRendered(){Y.rendered=!1}}class Ot extends At{constructor(t,e,n=null){super(),this.CenterIndex=t,this.MaterialIndex=e,this.transparent=!1;const r=window;this.controlpoints=r.Positions,this.Normals=r.Normals,this.Colors=r.Colors,this.Indices=r.Indices,this.transparent=M[this.MaterialIndex].diffuse[3]<1}Bound(t,e){let n=Array(3),r=t.length,a=Array(r);for(let i=0;i<3;++i){for(let e=0;e<r;++e)a[e]=t[e][i];n[i]=Et(a,e)}return[n[0],n[1],n[2]]}Bounds(t,e){return[this.Bounds(t,Math.min),this.Bounds(t,Math.max)]}setMaterialIndex(){this.transparent?this.setMaterial(q,Xe):this.setMaterial(F,ze)}process(t){this.data.vertices.length=6*t.length,C=this.Colors.length>0?-1-C:1+C;for(let e=0,n=this.Indices.length;e<n;++e){let n=this.Indices[e],r=n[0],a=t[r[0]],i=t[r[1]],s=t[r[2]],o=!this.offscreen([a,i,s]),h=n.length>1?n[1]:r;if(h&&0!=h.length||(h=r),this.Colors.length>0){let t=n.length>2?n[2]:r;t&&0!=t.length||(t=r);let e=this.Colors[t[0]],l=this.Colors[t[1]],u=this.Colors[t[2]];this.transparent=this.transparent||e[3]+l[3]+u[3]<3,0==tt?(this.data.iVertex(r[0],a,this.Normals[h[0]],o,e),this.data.iVertex(r[1],i,this.Normals[h[1]],o,l),this.data.iVertex(r[2],s,this.Normals[h[2]],o,u)):(this.data.iVertex(r[0],a,this.Normals[h[0]],o,e),this.data.iVertex(r[1],i,this.Normals[h[1]],o,l),this.data.iVertex(r[1],i,this.Normals[h[1]],o,l),this.data.iVertex(r[2],s,this.Normals[h[2]],o,u),this.data.iVertex(r[2],s,this.Normals[h[2]],o,u),this.data.iVertex(r[0],a,this.Normals[h[0]],o,e))}else 0==tt?(this.data.iVertex(r[0],a,this.Normals[h[0]],o),this.data.iVertex(r[1],i,this.Normals[h[1]],o),this.data.iVertex(r[2],s,this.Normals[h[2]],o)):(this.data.iVertex(r[0],a,this.Normals[h[0]],o),this.data.iVertex(r[1],i,this.Normals[h[1]],o),this.data.iVertex(r[1],i,this.Normals[h[1]],o),this.data.iVertex(r[2],s,this.Normals[h[2]],o),this.data.iVertex(r[2],s,this.Normals[h[2]],o),this.data.iVertex(r[0],a,this.Normals[h[0]],o))}this.data.nvertices=t.length,this.data.indices.length>0&&this.append()}append(){this.transparent?q.append(this.data):F.append(this.data)}notRendered(){this.transparent?q.rendered=!1:F.rendered=!1}}function _t(){L=-Math.tan(.5*i.angleOfView)*i.maxBound[2],Z.x=Z.y=0,Z.z=.5*(i.minBound[2]+i.maxBound[2]),A=R=i.zoom0,K.zmin=i.minBound[2],K.zmax=i.maxBound[2],Q.x=Q.y=0,Ge(),J=!0,We()}function Vt(){return window.top.asyWebApplication}function Yt(t){window.parent.asyProjection=t}function Dt(){var e;t.identity(z),_t(),null===(e=Vt())||void 0===e||e.setProjection(""),Yt(!1)}let Bt=0,Ut=1,qt=2,Ft=3,Ct=4;function zt(t=[]){let e=gt(s,"#ifdef WEBGL2\n#define IN in\n#define OUT out\n#else\n#define IN attribute\n#define OUT varying\n#endif\n\nIN vec3 position;\n#ifdef WIDTH\nIN float width;\n#endif\n#ifdef NORMAL\nIN vec3 normal;\n#endif\n\nIN float materialIndex;\n\n#ifdef WEBGL2\nflat out int MaterialIndex;\n#ifdef COLOR\nOUT vec4 Color;\n#endif\n\n#else\nOUT vec4 diffuse;\nOUT vec3 specular;\nOUT float roughness,metallic,fresnel0;\nOUT vec4 emissive;\n\nstruct Material {\n  vec4 diffuse,emissive,specular;\n  vec4 parameters;\n};\n\nuniform Material Materials[Nmaterials];\n#endif\n\n#ifdef COLOR\nIN vec4 color;\n#endif\n\nuniform bool orthographic;\nuniform mat3 normMat;\nuniform mat4 viewMat;\nuniform mat4 projViewMat;\n\n#ifdef NORMAL\nOUT vec3 ViewPosition;\nOUT vec3 Normal;\n#endif\n\nvoid main(void)\n{\n  vec4 v=vec4(position,1.0);\n  gl_Position=projViewMat*v;\n\n#ifdef NORMAL\n  ViewPosition=orthographic ? vec3(0.0,0.0,-1.0) : (viewMat*v).xyz;\n  Normal=normalize(normal*normMat);\n#endif\n\n#ifdef WEBGL2\n  MaterialIndex=int(materialIndex);\n#ifdef COLOR\n  Color=color;\n#endif\n#else\n#ifdef NORMAL\n  Material m;\n#ifdef TRANSPARENT\n  m=Materials[int(abs(materialIndex))-1];\n  emissive=m.emissive;\n  if(materialIndex >= 0.0)\n    diffuse=m.diffuse;\n  else {\n    diffuse=color;\n#if nlights == 0\n    emissive += color;\n#endif\n  }\n#else\n  m=Materials[int(materialIndex)];\n  emissive=m.emissive;\n#ifdef COLOR\n  diffuse=color;\n#if nlights == 0\n    emissive += color;\n#endif\n#else\n  diffuse=m.diffuse;\n#endif // COLOR\n#endif // TRANSPARENT\n  specular=m.specular.rgb;\n  vec4 parameters=m.parameters;\n  roughness=1.0-parameters[0];\n  metallic=parameters[1];\n  fresnel0=parameters[2];\n#else\n  emissive=Materials[int(materialIndex)].emissive;\n#endif // NORMAL\n#endif // WEBGL2\n\n#ifdef WIDTH\n  gl_PointSize=width;\n#endif\n}\n",s.VERTEX_SHADER,t),n=gt(s,"#ifdef WEBGL2\n#define IN in\nout vec4 outValue;\n#define OUTVALUE outValue\n#else\n#define IN varying\n#define OUTVALUE gl_FragColor\n#endif\n\n#ifdef WEBGL2\nflat in int MaterialIndex;\n\nstruct Material {\n  vec4 diffuse,emissive,specular;\n  vec4 parameters;\n};\n\nuniform Material Materials[Nmaterials];\n\nvec4 diffuse;\nvec3 specular;\nfloat roughness,metallic,fresnel0;\nvec4 emissive;\n\n#ifdef COLOR\nin vec4 Color;\n#endif\n\n#else\nIN vec4 diffuse;\nIN vec3 specular;\nIN float roughness,metallic,fresnel0;\nIN vec4 emissive;\n#endif\n\n#ifdef NORMAL\n\nIN vec3 ViewPosition;\nIN vec3 Normal;\n\nvec3 normal;\n\nstruct Light {\n  vec3 direction;\n  vec3 color;\n};\n\nuniform Light Lights[Nlights];\n\n#ifdef USE_IBL\nuniform sampler2D reflBRDFSampler;\nuniform sampler2D diffuseSampler;\nuniform sampler2D reflImgSampler;\n\nconst float pi=acos(-1.0);\nconst float piInv=1.0/pi;\nconst float twopi=2.0*pi;\nconst float twopiInv=1.0/twopi;\n\n// (x,y,z) -> (r,theta,phi);\n// theta -> [0,pi]: colatitude\n// phi -> [-pi,pi]: longitude\nvec3 cart2sphere(vec3 cart)\n{\n  float x=cart.x;\n  float y=cart.z;\n  float z=cart.y;\n\n  float r=length(cart);\n  float theta=r > 0.0 ? acos(z/r) : 0.0;\n  float phi=atan(y,x);\n\n  return vec3(r,theta,phi);\n}\n\nvec2 normalizedAngle(vec3 cartVec)\n{\n  vec3 sphericalVec=cart2sphere(cartVec);\n  sphericalVec.y=sphericalVec.y*piInv;\n  sphericalVec.z=0.75-sphericalVec.z*twopiInv;\n  return sphericalVec.zy;\n}\n\nvec3 IBLColor(vec3 viewDir)\n{\n  vec3 IBLDiffuse=diffuse.rgb*texture(diffuseSampler,normalizedAngle(normal)).rgb;\n  vec3 reflectVec=normalize(reflect(-viewDir,normal));\n  vec2 reflCoord=normalizedAngle(reflectVec);\n  vec3 IBLRefl=textureLod(reflImgSampler,reflCoord,roughness*ROUGHNESS_STEP_COUNT).rgb;\n  vec2 IBLbrdf=texture(reflBRDFSampler,vec2(dot(normal,viewDir),roughness)).rg;\n  float specularMultiplier=fresnel0*IBLbrdf.x+IBLbrdf.y;\n  vec3 dielectric=IBLDiffuse+specularMultiplier*IBLRefl;\n  vec3 metal=diffuse.rgb*IBLRefl;\n  return mix(dielectric,metal,metallic);\n}\n#else\nfloat Roughness2;\nfloat NDF_TRG(vec3 h)\n{\n  float ndoth=max(dot(normal,h),0.0);\n  float alpha2=Roughness2*Roughness2;\n  float denom=ndoth*ndoth*(alpha2-1.0)+1.0;\n  return denom != 0.0 ? alpha2/(denom*denom) : 0.0;\n}\n\nfloat GGX_Geom(vec3 v)\n{\n  float ndotv=max(dot(v,normal),0.0);\n  float ap=1.0+Roughness2;\n  float k=0.125*ap*ap;\n  return ndotv/((ndotv*(1.0-k))+k);\n}\n\nfloat Geom(vec3 v, vec3 l)\n{\n  return GGX_Geom(v)*GGX_Geom(l);\n}\n\nfloat Fresnel(vec3 h, vec3 v, float fresnel0)\n{\n  float a=1.0-max(dot(h,v),0.0);\n  float b=a*a;\n  return fresnel0+(1.0-fresnel0)*b*b*a;\n}\n\n// physical based shading using UE4 model.\nvec3 BRDF(vec3 viewDirection, vec3 lightDirection)\n{\n  vec3 lambertian=diffuse.rgb;\n  vec3 h=normalize(lightDirection+viewDirection);\n\n  float omegain=max(dot(viewDirection,normal),0.0);\n  float omegaln=max(dot(lightDirection,normal),0.0);\n\n  float D=NDF_TRG(h);\n  float G=Geom(viewDirection,lightDirection);\n  float F=Fresnel(h,viewDirection,fresnel0);\n\n  float denom=4.0*omegain*omegaln;\n  float rawReflectance=denom > 0.0 ? (D*G)/denom : 0.0;\n\n  vec3 dielectric=mix(lambertian,rawReflectance*specular,F);\n  vec3 metal=rawReflectance*diffuse.rgb;\n\n  return mix(dielectric,metal,metallic);\n}\n#endif\n\n#endif\n\nvoid main(void)\n{\n#ifdef WEBGL2\n#ifdef NORMAL\n  Material m;\n#ifdef TRANSPARENT\n  m=Materials[abs(MaterialIndex)-1];\n  emissive=m.emissive;\n  if(MaterialIndex >= 0)\n    diffuse=m.diffuse;\n  else {\n    diffuse=Color;\n#if nlights == 0\n    emissive += Color;\n#endif\n  }\n#else\n  m=Materials[MaterialIndex];\n  emissive=m.emissive;\n#ifdef COLOR\n  diffuse=Color;\n#if nlights == 0\n    emissive += Color;\n#endif\n#else\n  diffuse=m.diffuse;\n#endif // COLOR\n#endif // TRANSPARENT\n  specular=m.specular.rgb;\n  vec4 parameters=m.parameters;\n  roughness=1.0-parameters[0];\n  metallic=parameters[1];\n  fresnel0=parameters[2];\n#else\n  emissive=Materials[MaterialIndex].emissive;\n#endif // NORMAL\n#endif // WEBGL2\n\n#if defined(NORMAL) && nlights > 0\n  normal=normalize(Normal);\n  normal=gl_FrontFacing ? normal : -normal;\n  vec3 viewDir=-normalize(ViewPosition);\n\nvec3 color;\n#ifdef USE_IBL\n  color=IBLColor(viewDir);\n#else\n  Roughness2=roughness*roughness;\n  color=emissive.rgb;\n  for(int i=0; i < nlights; ++i) {\n    Light Li=Lights[i];\n    vec3 L=Li.direction;\n    float cosTheta=max(dot(normal,L),0.0);\n    vec3 radiance=cosTheta*Li.color;\n    color += BRDF(viewDir,L)*radiance;\n  }\n#endif\n  OUTVALUE=vec4(color,diffuse.a);\n#else\n  OUTVALUE=emissive;\n#endif\n}\n",s.FRAGMENT_SHADER,t),r=s.createProgram();return s.attachShader(r,e),s.attachShader(r,n),s.bindAttribLocation(r,Bt,"position"),s.bindAttribLocation(r,Ut,"normal"),s.bindAttribLocation(r,qt,"materialIndex"),s.bindAttribLocation(r,Ft,"color"),s.bindAttribLocation(r,Ct,"width"),s.linkProgram(r),s.getProgramParameter(r,s.LINK_STATUS)||alert("Could not initialize shaders"),r}class Xt{constructor(t,e,n,r){this.m0=.5*(t+e);const a=.5*(e+n);this.m2=.5*(n+r),this.m3=.5*(this.m0+a),this.m4=.5*(a+this.m2),this.m5=.5*(this.m3+this.m4)}}class Ht{constructor(t,e,n,r){this.m0=[.5*(t[0]+e[0]),.5*(t[1]+e[1]),.5*(t[2]+e[2])];const a=.5*(e[0]+n[0]),i=.5*(e[1]+n[1]),s=.5*(e[2]+n[2]);this.m2=[.5*(n[0]+r[0]),.5*(n[1]+r[1]),.5*(n[2]+r[2])],this.m3=[.5*(this.m0[0]+a),.5*(this.m0[1]+i),.5*(this.m0[2]+s)],this.m4=[.5*(a+this.m2[0]),.5*(i+this.m2[1]),.5*(s+this.m2[2])],this.m5=[.5*(this.m3[0]+this.m4[0]),.5*(this.m3[1]+this.m4[1]),.5*(this.m3[2]+this.m4[2])]}}class Wt{constructor(t){this.l003=t[0];const e=t[1],n=t[2],r=t[3],a=t[4],i=t[5];this.r300=t[6];const s=t[7],o=t[8];this.u030=t[9],this.u021=.5*(this.u030+i),this.u120=.5*(this.u030+o);const h=.5*(i+n),l=.5*(o+a),u=.5*(o+s),c=.5*(n+a);this.l012=.5*(n+this.l003);const f=.5*(a+r);this.r210=.5*(s+this.r300),this.l102=.5*(this.l003+e);const m=.5*(e+r);this.r201=.5*(r+this.r300),this.u012=.5*(this.u021+h),this.u210=.5*(this.u120+u),this.l021=.5*(h+this.l012);const d=.5*l+.25*(a+e);this.r120=.5*(u+this.r210);const M=.5*c+.25*(a+s),v=.25*(i+a)+.5*f;this.l201=.5*(this.l102+m),this.r102=.5*(m+this.r201),this.l210=.5*(M+this.l201),this.r012=.5*(M+this.r102),this.l300=.5*(this.l201+this.r102),this.r021=.5*(v+this.r120),this.u201=.5*(this.u210+v),this.r030=.5*(this.u210+this.r120),this.u102=.5*(this.u012+d),this.l120=.5*(this.l021+d),this.l030=.5*(this.u012+this.l021),this.l111=.5*(c+this.l102),this.r111=.5*(f+this.r210),this.u111=.5*(this.u021+l),this.c111=.25*(h+u+m+a)}}function Gt(t){const e=1/(Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])||1);return[t[0]*e,t[1]*e,t[2]*e]}function kt(t){return t[0]*t[0]+t[1]*t[1]+t[2]*t[2]}function jt(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function $t(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Zt(t,e,n,r,a){let i=1-a,s=i*i;return s*i*t+a*(3*(s*e+a*i*n)+a*a*r)}function Qt(t,e){return[e[0]-t[0],e[1]-t[1],e[2]-t[2]]}function Kt(t,e,n){return[3*(t[0]+n[0])-6*e[0],3*(t[1]+n[1])-6*e[1],3*(t[2]+n[2])-6*e[2]]}function Jt(t,e,n,r){return[r[0]-t[0]+3*(e[0]-n[0]),r[1]-t[1]+3*(e[1]-n[1]),r[2]-t[2]+3*(e[2]-n[2])]}function te(t,e,n,r){let a=[g*(r[0]-t[0]),g*(r[1]-t[1]),g*(r[2]-t[2])];return Math.max(kt([e[0]-a[0]-t[0],e[1]-a[1]-t[1],e[2]-a[2]-t[2]]),kt([r[0]-a[0]-n[0],r[1]-a[1]-n[1],r[2]-a[2]-n[2]]))}function ee(t,e,n,r){const a=[e[0]-t[0],e[1]-t[1],e[2]-t[2]],i=[r[0]-n[0],r[1]-n[1],r[2]-n[2]];return Math.max(kt($t(a,Gt(i))),kt($t(i,Gt(a))))/9}function ne(t){return[Math.min(t[0][0],t[1][0],t[2][0],t[3][0],t[4][0],t[5][0],t[6][0],t[7][0]),Math.min(t[0][1],t[1][1],t[2][1],t[3][1],t[4][1],t[5][1],t[6][1],t[7][1]),Math.min(t[0][2],t[1][2],t[2][2],t[3][2],t[4][2],t[5][2],t[6][2],t[7][2])]}function re(t){return[Math.max(t[0][0],t[1][0],t[2][0],t[3][0],t[4][0],t[5][0],t[6][0],t[7][0]),Math.max(t[0][1],t[1][1],t[2][1],t[3][1],t[4][1],t[5][1],t[6][1],t[7][1]),Math.max(t[0][2],t[1][2],t[2][2],t[3][2],t[4][2],t[5][2],t[6][2],t[7][2])]}function ae(t){we||Re(),et=!0,nt=t.clientX,rt=t.clientY}let ie,se,oe=!1;function he(t){return Math.hypot(t[0].pageX-t[1].pageX,t[0].pageY-t[1].pageY)}let le=null;function ue(t){t.preventDefault(),we||Re();let e=t.targetTouches;Pe=Se=oe=!1,Ne||(1!=e.length||et||(se=(new Date).getTime(),le=e[0].identifier,nt=e[0].pageX,rt=e[0].pageY),2!=e.length||et||(le=e[0].identifier,ie=he(e),oe=!0))}function ce(t){et=!1}function fe(e,n,r,a,i){if(e==r&&n==a)return;const{angle:s,axis:o}=function(t,e){const n=ge(t),r=ge(e),a=jt(n,r);return{angle:a>1?0:a<-1?b:Math.acos(a),axis:Gt($t(n,r))}}([e,-n],[r,-a]);t.fromRotation($,2*i*O*s/R,o),t.multiply(z,$,z)}function me(t,e,n,r){let a=1/R;Q.x+=(n-t)*a*c,Q.y-=(r-e)*a*f}function de(t,e,n,r){i.orthographic?me(t,e,n,r):(Z.x+=(n-t)*(K.xmax-K.xmin),Z.y-=(r-e)*(K.ymax-K.ymin))}function Me(){var n,r;n=H,r=z,t.fromTranslation($,[Z.x,Z.y,Z.z]),t.invert(j,$),t.multiply(n,r,j),t.multiply(n,$,n),t.translate(H,H,[Z.x,Z.y,0]),e.fromMat4(k,H),e.invert(G,k),t.multiply(W,X,H)}function ve(){let t=Math.sqrt(Number.MAX_VALUE),e=1/t;R<=e&&(R=e),R>=t&&(R=t),(1.5*R<A||R>1.5*A)&&(J=!0,A=R)}function pe(t){let e=i.zoomStep*f*t;const n=Math.log(.1*Number.MAX_VALUE)/Math.log(i.zoomFactor);Math.abs(e)<n&&(R*=i.zoomFactor**e,ve())}function ge(t){let e=t[0],n=t[1],r=Math.hypot(e,n);if(r>1){const t=1/r;e*=t,n*=t}return[e,n,Math.sqrt(Math.max(1-n*n-e*e,0))]}function be(t,e,n,r){pe(e-r)}function xe(t,e,n,r=1){let a;switch(n){case 1:a=fe;break;case 2:a=me;break;case 3:a=be;break;case 4:a=de;break;default:a=(t,e,n,r)=>{}}a((nt-c)/c,(rt-f)/f,(t-c)/c,(e-f)/f,r),nt=t,rt=e,Ge(),We()}let we=0;function Re(){we=1,i.canvas.addEventListener("wheel",Ie,!1)}function Ae(){let t,e,n;[t,e,n]=function(){let t=Array(3),e=Array(3),n=Array(3),r=Z.x,a=Z.y,s=.5*(K.zmin+K.zmax);for(let o=0;o<3;++o){let h=0,l=0,u=0,c=4*o;for(let t=0;t<4;++t){let e=4*t,n=z[e],o=z[e+1],f=z[e+2],m=z[e+3],d=i.Transform[c+t];h+=d*(m-r*n-a*o),u+=d*o,l+=d*(m-r*n-a*o+s*f)}t[o]=h,e[o]=u,n[o]=l}return[t,e,n]}();let r=i.orthographic?"  orthographic(":"  perspective(",a="".padStart(r.length),s="currentprojection=\n"+r+"camera=("+t+"),\n"+a+"up=("+e+"),\n"+a+"target=("+n+"),\n"+a+"zoom="+R*i.initialZoom/i.zoom0;return i.orthographic||(s+=",\n"+a+"angle="+2*Math.atan(Math.tan(.5*i.angleOfView)/R)/x),0==E&&0==T||(s+=",\n"+a+"viewportshift=("+E+","+T+")"),i.orthographic||(s+=",\n"+a+"autoadjust=false"),s+=");\n",Yt(!0),s}function Ee(e){if(we||Re(),i.embedded&&we&&27==e.keyCode)return we=0,void i.canvas.removeEventListener("wheel",Ie,!1);let n=e.key,r=null;switch(n){case"x":r=[1,0,0];break;case"y":r=[0,1,0];break;case"z":r=[0,0,1];break;case"h":Dt();break;case"m":++tt,3==tt&&(tt=0),2!=tt&&(i.embedded||dt(),mt(i.ibl)),J=!0,We();break;case"+":case"=":case">":R*=i.zoomFactor,ye();break;case"-":case"_":case"<":R/=i.zoomFactor,ye();break;case"c":Vt()||prompt("Ctrl+c Enter to copy currentprojection to clipboard; then append to asy file:",Ae());break;case"b":vn?(hn.remove(),vn=!1):function(){vn=!0;const t=document;hn=t.createElement("input"),on=1/rn,hn.type="range",hn.min="0",hn.max="1",hn.step="0.001",hn.value=(un*on).toString(),hn.className="slider",hn.style.position="fixed",hn.onkeydown=()=>!1,hn.oninput=()=>{const t=parseFloat(hn.value);un=(en+rn)*t,sn>=en+nn&&!dn&&(dn=!0,requestAnimationFrame(Mn))},hn.onchange=()=>{dn=!1},t.body.prepend(hn)}()}"ArrowRight"==n&&"forward"!=ln?(ln="forward",sn>=en+nn&&!dn&&(dn=!0,requestAnimationFrame(Mn))):"ArrowLeft"==n&&"backward"!=ln&&(ln="backward",sn>=en+nn&&!dn&&(dn=!0,requestAnimationFrame(Mn))),null!==r&&(t.rotate(z,z,.1,r),Me(),We())}function Te(t){let e=t.key;("ArrowRight"==e&&"forward"==ln||"ArrowLeft"==e&&"backward"==ln)&&(sn>=en+nn&&(dn=!1),ln=null)}function ye(){ve(),Ge(),We()}function Ie(t){t.preventDefault(),t.deltaY<0?R*=i.zoomFactor:R/=i.zoomFactor,ye()}function Le(t){if(!et)return;let e,n=t.clientX,r=t.clientY;e=t.getModifierState("Control")?2:t.getModifierState("Shift")?3:t.getModifierState("Alt")?4:1,xe(n,r,e)}let Ne=!1,Pe=!1,Se=!1;function Oe(t){if(t.preventDefault(),Ne)return;let e=t.targetTouches;if(!oe&&1==e.length&&le==e[0].identifier){let t=e[0].pageX,n=e[0].pageY,r=t-nt,a=n-rt,s=r*r+a*a<=i.shiftHoldDistance*i.shiftHoldDistance;s&&!Pe&&!Se&&(new Date).getTime()-se>i.shiftWaitTime&&(navigator.vibrate&&window.navigator.vibrate(i.vibrateTime),Pe=!0),Pe?xe(t,n,2):s||(Se=!0,xe(e[0].pageX,e[0].pageY,1,.5))}if(oe&&!Pe&&2==e.length&&le==e[0].identifier){let t=he(e),n=t-ie;Ne=!0,n*=i.zoomPinchFactor,n>i.zoomPinchCap&&(n=i.zoomPinchCap),n<-i.zoomPinchCap&&(n=-i.zoomPinchCap),pe(n/S),ie=t,Pe=Se=Ne=!1,Ge(),We()}}let _e,Ve,Ye,De,Be=[];function Ue(){xt(Y,_e),Y.clear()}function qe(){xt(D,Ve),D.clear()}function Fe(){xt(B,Ve),B.clear()}function Ce(){xt(U,Ye),U.clear()}function ze(){xt(F,De),F.rendered=!1,F.clear()}function Xe(){let t=q.indices;if(tt>0)return xt(q,De,t),void q.clear();if(t.length>0){!function(t){let e=H[2],n=H[6],r=H[10];Be.length=t.length;for(let a=0;a<t.length;++a){let i=6*a;Be[a]=e*t[i]+n*t[i+1]+r*t[i+2]}}(q.vertices);const e=t.length/3,n=[...Array(e).keys()];n.sort(function(e,n){let r=3*e;const a=t[r],i=t[r+1],s=t[r+2];let o=3*n;const h=t[o],l=t[o+1],u=t[o+2];return Be[a]+Be[i]+Be[s]<Be[h]+Be[l]+Be[u]?-1:1});const r=Array(t.length);for(let a=0;a<e;++a){const e=3*n[a];r[3*a]=t[e],r[3*a+1]=t[e+1],r[3*a+2]=t[e+2]}s.depthMask(!1),xt(q,De,r),q.rendered=!1,s.depthMask(!0)}q.clear()}function He(){Ue(),qe(),Fe(),Ce(),ze(),Xe(),requestAnimationFrame(He)}function We(){i.embedded&&(h.width=i.canvasWidth,h.height=i.canvasHeight,ke()),s.clearColor(i.background[0],i.background[1],i.background[2],i.background[3]),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT),tn=performance.now();for(const t of m)t.render();He(),i.embedded&&(l.clearRect(0,0,i.canvasWidth,i.canvasHeight),l.drawImage(h,0,0)),0==tt&&(J=!1)}function Ge(){var e;!function(t,e,n,r){let a=t/e;E=(n/t+i.viewportShift[0])*R,T=(r/e+i.viewportShift[1])*R;let s=1/R;if(i.orthographic){let t=i.maxBound[0]-i.minBound[0],e=i.maxBound[1]-i.minBound[1];if(t<e*a){let t=.5*e*a*s,n=2*t*E,r=e*s*T;K.xmin=-t-n,K.xmax=t-n,K.ymin=i.minBound[1]*s-r,K.ymax=i.maxBound[1]*s-r}else{let e=.5*t*s/a,n=t*s*E,r=2*e*T;K.xmin=i.minBound[0]*s-n,K.xmax=i.maxBound[0]*s-n,K.ymin=-e-r,K.ymax=e-r}}else{let t=L*s,e=t*a,n=2*e*E,r=2*t*T;K.xmin=-e-n,K.xmax=e-n,K.ymin=-t-r,K.ymax=t-r}}(i.canvasWidth,i.canvasHeight,Q.x,Q.y),(i.orthographic?t.ortho:t.frustum)(X,K.xmin,K.xmax,K.ymin,K.ymax,-K.zmax,-K.zmin),Me(),null===(e=Vt())||void 0===e||e.setProjection(Ae())}function ke(){s.viewportWidth=i.canvasWidth,s.viewportHeight=i.canvasHeight,s.viewport(.5*(i.canvas.width-i.canvasWidth),.5*(i.canvas.height-i.canvasHeight),i.canvasWidth,i.canvasHeight),s.scissor(0,0,i.canvas.width,i.canvas.height)}function je(){var t;if(i.zoom0=i.initialZoom,""===(null===(t=Vt())||void 0===t?void 0:t.getProjection())&&Yt(!1),i.absolute&&!i.embedded)i.canvasWidth=i.canvasWidth0*window.devicePixelRatio,i.canvasHeight=i.canvasHeight0*window.devicePixelRatio;else{let t=i.canvasWidth0/i.canvasHeight0;i.canvasWidth=Math.max(window.innerWidth-10,10),i.canvasHeight=Math.max(window.innerHeight-10,10),!i.orthographic&&!window.parent.asyProjection&&i.canvasWidth<i.canvasHeight*t&&(i.zoom0*=i.canvasWidth/(i.canvasHeight*t))}i.canvas.width=i.canvasWidth,i.canvas.height=i.canvasHeight,window.innerWidth,window.innerHeight;let e=1/i.zoom0;var n,r;i.viewportShift[0]*=e,i.viewportShift[1]*=e,n=i.canvasWidth,r=i.canvasHeight,n>y&&(n=y),r>I&&(r=I),Q.x*=n/i.canvasWidth,Q.y*=r/i.canvasHeight,i.canvasWidth=n,i.canvasHeight=r,i.embedded&&(i.canvas.width=h.width=i.canvasWidth,i.canvas.height=h.height=i.canvasHeight),S=Math.hypot(i.canvasWidth,i.canvasHeight),c=.5*i.canvas.width,f=.5*i.canvas.height,O=1+8*Math.hypot(i.viewportMargin[0],i.viewportMargin[1])/S,ke(),Ge(),J=!0,_t()}class $e{constructor(t,e=null){if(this.center=t,e){const t=e[0],n=e[1];this.ct=Math.cos(t),this.st=Math.sin(t),this.cp=Math.cos(n),this.sp=Math.sin(n)}}T0(t){return[t[0]+this.center[0],t[1]+this.center[1],t[2]+this.center[2]]}T(t){let e=t[0],n=t[1],r=t[2],a=e*this.ct+r*this.st;return[a*this.cp-n*this.sp+this.center[0],a*this.sp+n*this.cp+this.center[1],-e*this.st+r*this.ct+this.center[2]]}}function Ze(t,e,n){let r=[t(e),t([e[0],e[1],n[2]]),t([e[0],n[1],e[2]]),t([e[0],n[1],n[2]]),t([n[0],e[1],e[2]]),t([n[0],e[1],n[2]]),t([n[0],n[1],e[2]]),t(n)];return[ne(r),re(r)]}function Qe(t){return t.map(function(t){let e=[t[0],t[1],t[2],1],n=r.create();return r.transformMat4(n,e,N),[n[0],n[1],n[2]]})}function Ke(t,e,n){return t.map(function(t){return n(t,e)})}function Je(t,e,n){return t.map(function(t){return n(t[0],t[1],e)})}let tn,en=null,nn=0,rn=0,an=[];let sn,on,hn,ln=null,un=0,cn=1,fn=null,mn=!1,dn=!1;function Mn(t){sn=t,fn||(fn=t);const e=t-fn;fn=t,"forward"==ln?un+=e*cn:"backward"==ln&&(un=Math.max(0,un-e*cn)),hn&&(hn.value=(un*on).toString()),J=!0,We(),(mn&&!dn?t<en+nn:dn)?requestAnimationFrame(Mn):fn=null}let vn=!1,pn=4/3*(Math.sqrt(2)-1);async function gn(t){return(await fetch(t)).arrayBuffer()}function bn(t){return t.getBytes().filter((t,e)=>e%4!=3)}function xn(t,e,n=s.RGB16F){let r=t.width(),a=t.height(),i=s.createTexture();return s.activeTexture(s.TEXTURE0+e),s.bindTexture(s.TEXTURE_2D,i),s.pixelStorei(s.UNPACK_ALIGNMENT,1),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR),s.texImage2D(s.TEXTURE_2D,0,n,r,a,0,s.RGB,s.FLOAT,bn(t)),i}globalThis.window.webGLStart=function(){i.canvas=document.getElementById("Asymptote"),i.embedded=window.top.document!=document,pt(),s.enable(s.BLEND),s.blendFunc(s.SRC_ALPHA,s.ONE_MINUS_SRC_ALPHA),s.enable(s.DEPTH_TEST),s.enable(s.SCISSOR_TEST),i.canvas.onmousedown=ae,document.onmouseup=ce,document.onmousemove=Le,i.canvas.onkeydown=Ee,i.embedded||Re(),i.canvas.addEventListener("touchstart",ue,!1),i.canvas.addEventListener("touchend",ce,!1),i.canvas.addEventListener("touchcancel",ce,!1),i.canvas.addEventListener("touchleave",ce,!1),i.canvas.addEventListener("touchmove",Oe,!1),document.addEventListener("keydown",Ee,!1),document.addEventListener("keyup",Te,!1),i.canvasWidth0=i.canvasWidth,i.canvasHeight0=i.canvasHeight,t.identity(z),0!=window.innerWidth&&0!=window.innerHeight&&je(),window.addEventListener("resize",je,!1),i.ibl&&(Module.onRuntimeInitialized=async()=>{await async function(){const t=i.imageURL+i.image+"/",e=[gn(i.imageURL+"refl.exr").then(t=>{let e=new Module.EXRLoader(t);ut=xn(e,0)}),gn(t+"diffuse.exr").then(t=>{let e=new Module.EXRLoader(t);lt=xn(e,1)})],n=[gn(t+"refl0.exr")];for(let e=1;e<=8;++e)n.push(gn(t+"refl"+e+"w.exr"));const r=Promise.all(n).then(t=>{let e=s.createTexture();s.activeTexture(s.TEXTURE0+2),s.pixelStorei(s.UNPACK_ALIGNMENT,1),s.bindTexture(s.TEXTURE_2D,e),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAX_LEVEL,t.length-1),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR_MIPMAP_LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR),s.texParameterf(s.TEXTURE_2D,s.TEXTURE_MIN_LOD,0),s.texParameterf(s.TEXTURE_2D,s.TEXTURE_MAX_LOD,8);for(let e=0;e<t.length;++e){let n=new Module.EXRLoader(t[e]);s.texImage2D(s.TEXTURE_2D,e,s.RGB16F,n.width(),n.height(),0,s.RGB,s.FLOAT,bn(n))}ht=e});e.push(r),await Promise.all(e)}(),i.embedded||dt(),mt(i.ibl),_t()}),Dt(),en=performance.now(),requestAnimationFrame(Mn)},globalThis.window.light=function(t,e){d.push(new ft(t,e))},globalThis.window.material=function(t,e,n,r,a,i){M.push(new ct(t,e,n,r,a,i))},globalThis.window.patch=function(t,e,n,a){m.push(new yt(t,e,n,a,null,null,function(){if(0==an.length)return;let t=an.filter(t=>null!=t.geometryTransform);return function(e){let n=Qe(e);const a=en+un;for(const{geometryTransform:e,durationInv:r,autoplay:i}of t){const t=i?tn:a;n=Ke(n,Math.min((t-en)*r,1),e)}return function(t){return t.map(function(t){let e=[t[0],t[1],t[2],1],n=r.create();return r.transformMat4(n,e,P),[n[0],n[1],n[2]]})}(n)}}(),function(){if(0==an.length)return;let t=an.filter(t=>null!=t.colorTransform);return function(e,n){let r=Qe([n[0],n[12],n[15],n[3]]);const a=en+un;for(const{colorTransform:n,durationInv:i,autoplay:s}of t){const t=s?tn:a,o=Math.min((t-en)*i,1);e=Je([[r[0],e[0]],[r[1],e[1]],[r[2],e[2]],[r[3],e[3]]],o,n)}return e}}()))},globalThis.window.curve=function(t,e,n){m.push(new Pt(t,e,n))},globalThis.window.pixel=function(t,e,n){m.push(new St(t,e,n))},globalThis.window.triangles=function(t,e){m.push(new Ot(t,e)),at.length=0,it.length=0,st.length=0,ot.length=0},globalThis.window.sphere=function(t,e,n,r,a){let i,s,o,h,l,u,c=.524670512339254,f=.595936986722291,d=.954967051233925,M=.0820155480083437,v=.996685028842544,p=.0549670512339254,g=.998880711874577,b=.0405017186586849,x=[[[1,0,0],[1,0,c],[f,0,d],[M,0,v],[1,pn,0],[1,pn,c],[f,pn*f,d],[M,pn*M,v],[pn,1,0],[pn,1,c],[pn*f,f,d],[pn*M,M,v],[0,1,0],[0,1,c],[0,f,d],[0,M,v]],[[M,0,v],[M,pn*M,v],[p,0,g],[pn*M,M,v],[b,b,1],[.05*pn,0,1],[0,M,v],[0,p,g],[0,.05*pn,1],[0,0,1]]],w=new $e(t,a);function R(t){let e=Array(t.length);for(let n=0;n<t.length;++n){let r=t[n];e[n]=l([i*r[0],s*r[1],o*r[2]])}return e}a?(h=1,u=0,l=w.T.bind(w)):(h=-1,u=-e,l=w.T0.bind(w));let A=Ze(l,[-e,-e,u],[e,e,e]),E=A[0],T=A[1];for(let t=-1;t<=1;t+=2){i=t*e;for(let t=-1;t<=1;t+=2){s=t*e;for(let t=h;t<=1;t+=2){o=t*e;for(let t=0;t<2;++t)m.push(new yt(R(x[t]),n,r,null,E,T))}}}},globalThis.window.disk=function(t,e,n,r,a){let i=1-2*pn/3,s=[[1,0,0],[1,-pn,0],[pn,-1,0],[0,-1,0],[1,pn,0],[i,0,0],[0,-i,0],[-pn,-1,0],[pn,1,0],[0,i,0],[-i,0,0],[-1,-pn,0],[0,1,0],[-pn,1,0],[-1,pn,0],[-1,0,0]],o=new $e(t,a),h=Ze(o.T.bind(o),[-e,-e,0],[e,e,0]);m.push(new yt(function(t){let n=Array(t.length);for(let r=0;r<t.length;++r){let a=t[r];n[r]=o.T([e*a[0],e*a[1],0])}return n}(s),n,r,null,h[0],h[1]))},globalThis.window.cylinder=function(t,e,n,r,a,i,s){let o,h,l=[[1,0,0],[1,0,1/3],[1,0,2/3],[1,0,1],[1,pn,0],[1,pn,1/3],[1,pn,2/3],[1,pn,1],[pn,1,0],[pn,1,1/3],[pn,1,2/3],[pn,1,1],[0,1,0],[0,1,1/3],[0,1,2/3],[0,1,1]],u=new $e(t,i);function c(t){let e=Array(t.length);for(let r=0;r<t.length;++r){let a=t[r];e[r]=u.T([o*a[0],h*a[1],n*a[2]])}return e}let f=Ze(u.T.bind(u),[-e,-e,0],[e,e,n]),d=f[0],M=f[1];for(let t=-1;t<=1;t+=2){o=t*e;for(let t=-1;t<=1;t+=2)h=t*e,m.push(new yt(c(l),r,a,null,d,M))}if(s){let e=u.T([0,0,n]);m.push(new Pt([t,e],r,a,t,e))}},globalThis.window.tube=function(t,e,n,r,a){let i=function(t,e,n,r,a){class i{constructor(t,e,n){this.p=t,this.r=e,this.t=n,this.s=$t(this.t,this.r)}}let s=Number.EPSILON*Math.max(kt(t),kt(e),kt(n),kt(r));function o(a){if(1==a){let a=[r[0]-n[0],r[1]-n[1],r[2]-n[2]];return kt(a)>s?Gt(a):(a=[2*n[0]-e[0]-r[0],2*n[1]-e[1]-r[1],2*n[2]-e[2]-r[2]],kt(a)>s?Gt(a):[r[0]-t[0]+3*(e[0]-n[0]),r[1]-t[1]+3*(e[1]-n[1]),r[2]-t[2]+3*(e[2]-n[2])])}let i=[r[0]-t[0]+3*(e[0]-n[0]),r[1]-t[1]+3*(e[1]-n[1]),r[2]-t[2]+3*(e[2]-n[2])],o=[2*(t[0]+n[0])-4*e[0],2*(t[1]+n[1])-4*e[1],2*(t[2]+n[2])-4*e[2]],h=[e[0]-t[0],e[1]-t[1],e[2]-t[2]],l=a*a,u=[i[0]*l+o[0]*a+h[0],i[1]*l+o[1]*a+h[1],i[2]*l+o[2]*a+h[2]];return kt(u)>s?Gt(u):(l=2*a,u=[i[0]*l+o[0],i[1]*l+o[1],i[2]*l+o[2]],kt(u)>s?Gt(u):Gt(i))}let h=Array(a.length),l=[e[0]-t[0],e[1]-t[1],e[2]-t[2]];kt(l)<s&&(l=[t[0]-2*e[0]+n[0],t[1]-2*e[1]+n[1],t[2]-2*e[2]+n[2]],kt(l)<s&&(l=[r[0]-t[0]+3*(e[0]-n[0]),r[1]-t[1]+3*(e[1]-n[1]),r[2]-t[2]+3*(e[2]-n[2])])),l=Gt(l);let u=function(t){let e=$t(t,[0,1,0]),n=Number.EPSILON*kt(t);return kt(e)>n?Gt(e):(e=$t(t,[0,0,1]),kt(e)>n?Gt(e):[1,0,0])}(l);h[0]=new i(t,u,l);for(let s=1;s<a.length;++s){let l=h[s-1],u=a[s],c=1-u,f=c*c,m=f*c,d=3*u;f*=d,c*=d*u;let M=u*u*u,v=[m*t[0]+f*e[0]+c*n[0]+M*r[0],m*t[1]+f*e[1]+c*n[1]+M*r[1],m*t[2]+f*e[2]+c*n[2]+M*r[2]],p=[v[0]-l.p[0],v[1]-l.p[1],v[2]-l.p[2]];if(0!=p[0]||0!=p[1]||0!=p[2]){let t=l.r,e=Gt(p),n=l.t,r=jt(e,n),a=[n[0]-2*r*e[0],n[1]-2*r*e[1],n[2]-2*r*e[2]];n=o(u);let c=2*jt(e,t),f=[t[0]-c*e[0],t[1]-c*e[1],t[2]-c*e[2]],m=Gt([n[0]-a[0],n[1]-a[1],n[2]-a[2]]),d=2*jt(m,f);f=[f[0]-d*m[0],f[1]-d*m[1],f[2]-d*m[2]],h[s]=new i(v,Gt(f),Gt(n))}else h[s]=h[s-1]}return h}(t[0],t[1],t[2],t[3],[0,1/3,2/3,1]),s=pn*e,o=[[e,0],[e,s],[s,e],[0,e]];function h(e,a,s,h){let l=Array(16);for(let n=0;n<4;++n){let r=i[n],u=r.r[0],c=r.s[0],f=u*e+c*a,m=u*s+c*h;u=r.r[1],c=r.s[1];let d=u*e+c*a,M=u*s+c*h;u=r.r[2],c=r.s[2];let v=u*e+c*a,p=u*s+c*h,g=t[n],b=g[0];const x=g[1],w=g[2];for(let t=0;t<4;++t){let e=o[t],r=e[0],a=e[1];l[4*n+t]=[f*r+m*a+b,d*r+M*a+x,v*r+p*a+w]}}m.push(new yt(l,n,r))}h(1,0,0,1),h(0,-1,1,0),h(-1,0,0,-1),h(0,1,-1,0),a&&m.push(new Pt(t,n,r))},globalThis.window.Positions=at,globalThis.window.Normals=it,globalThis.window.Colors=st,globalThis.window.Indices=ot,globalThis.window.initTransform=function(){N=t.create(),t.transpose(N,document.asy.Transform),P=t.create(),t.invert(P,N)},globalThis.window.beginTransform=function(t,e,n,r){const a=1e3*n;a>nn&&r&&(nn=a),n>rn&&(rn=a),r?mn=!0:dn=!0,an.push({geometryTransform:t,colorTransform:e,durationInv:a>0?1/a:0,autoplay:r})},globalThis.window.endTransform=function(){an.pop()},globalThis.window.interp=function(t,e,n){return[t[0]*(1-n)+e[0]*n,t[1]*(1-n)+e[1]*n,t[2]*(1-n)+e[2]*n,t[3]*(1-n)+e[3]*n]}})(),(()=>{var t={};n.r(t),n.d(t,{LDU:()=>y,add:()=>I,adjoint:()=>p,clone:()=>u,copy:()=>c,create:()=>l,determinant:()=>g,equals:()=>P,exactEquals:()=>N,frob:()=>T,fromRotation:()=>R,fromScaling:()=>A,fromValues:()=>m,identity:()=>f,invert:()=>v,mul:()=>_,multiply:()=>b,multiplyScalar:()=>S,multiplyScalarAndAdd:()=>O,rotate:()=>x,scale:()=>w,set:()=>d,str:()=>E,sub:()=>V,subtract:()=>L,transpose:()=>M});var e={};n.r(e),n.d(e,{add:()=>K,clone:()=>D,copy:()=>B,create:()=>Y,determinant:()=>z,equals:()=>rt,exactEquals:()=>nt,frob:()=>Q,fromRotation:()=>k,fromScaling:()=>j,fromTranslation:()=>$,fromValues:()=>q,identity:()=>U,invert:()=>C,mul:()=>at,multiply:()=>X,multiplyScalar:()=>tt,multiplyScalarAndAdd:()=>et,rotate:()=>H,scale:()=>W,set:()=>F,str:()=>Z,sub:()=>it,subtract:()=>J,translate:()=>G});var r={};n.r(r),n.d(r,{add:()=>dt,angle:()=>Xt,bezier:()=>Yt,ceil:()=>gt,clone:()=>lt,copy:()=>ft,create:()=>ht,cross:()=>Ot,dist:()=>Kt,distance:()=>Tt,div:()=>Qt,divide:()=>pt,dot:()=>St,equals:()=>kt,exactEquals:()=>Gt,floor:()=>bt,forEach:()=>ne,fromValues:()=>ct,hermite:()=>Vt,inverse:()=>Nt,len:()=>te,length:()=>ut,lerp:()=>_t,max:()=>wt,min:()=>xt,mul:()=>Zt,multiply:()=>vt,negate:()=>Lt,normalize:()=>Pt,random:()=>Dt,rotateX:()=>Ft,rotateY:()=>Ct,rotateZ:()=>zt,round:()=>Rt,scale:()=>At,scaleAndAdd:()=>Et,set:()=>mt,sqrDist:()=>Jt,sqrLen:()=>ee,squaredDistance:()=>yt,squaredLength:()=>It,str:()=>Wt,sub:()=>$t,subtract:()=>Mt,transformMat3:()=>Ut,transformMat4:()=>Bt,transformQuat:()=>qt,zero:()=>Ht});var a={};n.r(a),n.d(a,{add:()=>Ve,calculateW:()=>me,clone:()=>Pe,conjugate:()=>xe,copy:()=>Oe,create:()=>ae,dot:()=>Be,equals:()=>We,exactEquals:()=>He,exp:()=>de,fromEuler:()=>Re,fromMat3:()=>we,fromValues:()=>Se,getAngle:()=>he,getAxisAngle:()=>oe,identity:()=>ie,invert:()=>be,len:()=>Fe,length:()=>qe,lerp:()=>Ue,ln:()=>Me,mul:()=>Ye,multiply:()=>le,normalize:()=>Xe,pow:()=>ve,random:()=>ge,rotateX:()=>ue,rotateY:()=>ce,rotateZ:()=>fe,rotationTo:()=>Ge,scale:()=>De,set:()=>_e,setAxes:()=>je,setAxisAngle:()=>se,slerp:()=>pe,sqlerp:()=>ke,sqrLen:()=>ze,squaredLength:()=>Ce,str:()=>Ae});var i={};n.r(i),n.d(i,{add:()=>bn,clone:()=>Ze,conjugate:()=>yn,copy:()=>rn,create:()=>$e,dot:()=>An,equals:()=>Vn,exactEquals:()=>_n,fromMat4:()=>nn,fromRotation:()=>en,fromRotationTranslation:()=>Je,fromRotationTranslationValues:()=>Ke,fromTranslation:()=>tn,fromValues:()=>Qe,getDual:()=>hn,getReal:()=>on,getTranslation:()=>cn,identity:()=>an,invert:()=>Tn,len:()=>Ln,length:()=>In,lerp:()=>En,mul:()=>wn,multiply:()=>xn,normalize:()=>Sn,rotateAroundAxis:()=>gn,rotateByQuatAppend:()=>vn,rotateByQuatPrepend:()=>pn,rotateX:()=>mn,rotateY:()=>dn,rotateZ:()=>Mn,scale:()=>Rn,set:()=>sn,setDual:()=>un,setReal:()=>ln,sqrLen:()=>Pn,squaredLength:()=>Nn,str:()=>On,translate:()=>fn});var s={};n.r(s),n.d(s,{add:()=>Fn,angle:()=>mr,ceil:()=>Hn,clone:()=>Dn,copy:()=>Un,create:()=>Yn,cross:()=>ir,dist:()=>Rr,distance:()=>Qn,div:()=>wr,divide:()=>Xn,dot:()=>ar,equals:()=>pr,exactEquals:()=>vr,floor:()=>Wn,forEach:()=>Tr,fromValues:()=>Bn,inverse:()=>nr,len:()=>gr,length:()=>Jn,lerp:()=>sr,max:()=>kn,min:()=>Gn,mul:()=>xr,multiply:()=>zn,negate:()=>er,normalize:()=>rr,random:()=>or,rotate:()=>fr,round:()=>jn,scale:()=>$n,scaleAndAdd:()=>Zn,set:()=>qn,sqrDist:()=>Ar,sqrLen:()=>Er,squaredDistance:()=>Kn,squaredLength:()=>tr,str:()=>Mr,sub:()=>br,subtract:()=>Cn,transformMat2:()=>hr,transformMat2d:()=>lr,transformMat3:()=>ur,transformMat4:()=>cr,zero:()=>dr});var o={};n.r(o),n.d(o,{glMatrix:()=>h,mat2:()=>t,mat2d:()=>e,mat3:()=>st,mat4:()=>ot,quat:()=>a,quat2:()=>i,vec2:()=>s,vec3:()=>r,vec4:()=>re});var h=n(823);function l(){var t=new h.ARRAY_TYPE(4);return h.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}function u(t){var e=new h.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function c(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function f(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function m(t,e,n,r){var a=new h.ARRAY_TYPE(4);return a[0]=t,a[1]=e,a[2]=n,a[3]=r,a}function d(t,e,n,r,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t}function M(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t}function v(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],s=n*i-a*r;return s?(s=1/s,t[0]=i*s,t[1]=-r*s,t[2]=-a*s,t[3]=n*s,t):null}function p(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t}function g(t){return t[0]*t[3]-t[2]*t[1]}function b(t,e,n){var r=e[0],a=e[1],i=e[2],s=e[3],o=n[0],h=n[1],l=n[2],u=n[3];return t[0]=r*o+i*h,t[1]=a*o+s*h,t[2]=r*l+i*u,t[3]=a*l+s*u,t}function x(t,e,n){var r=e[0],a=e[1],i=e[2],s=e[3],o=Math.sin(n),h=Math.cos(n);return t[0]=r*h+i*o,t[1]=a*h+s*o,t[2]=r*-o+i*h,t[3]=a*-o+s*h,t}function w(t,e,n){var r=e[0],a=e[1],i=e[2],s=e[3],o=n[0],h=n[1];return t[0]=r*o,t[1]=a*o,t[2]=i*h,t[3]=s*h,t}function R(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t}function A(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t}function E(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function T(t){return Math.hypot(t[0],t[1],t[2],t[3])}function y(t,e,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,e,n]}function I(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function L(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function N(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function P(t,e){var n=t[0],r=t[1],a=t[2],i=t[3],s=e[0],o=e[1],l=e[2],u=e[3];return Math.abs(n-s)<=h.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(r-o)<=h.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(a-l)<=h.EPSILON*Math.max(1,Math.abs(a),Math.abs(l))&&Math.abs(i-u)<=h.EPSILON*Math.max(1,Math.abs(i),Math.abs(u))}function S(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function O(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}var _=b,V=L;function Y(){var t=new h.ARRAY_TYPE(6);return h.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t}function D(t){var e=new h.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function B(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function U(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function q(t,e,n,r,a,i){var s=new h.ARRAY_TYPE(6);return s[0]=t,s[1]=e,s[2]=n,s[3]=r,s[4]=a,s[5]=i,s}function F(t,e,n,r,a,i,s){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=i,t[5]=s,t}function C(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],s=e[4],o=e[5],h=n*i-r*a;return h?(h=1/h,t[0]=i*h,t[1]=-r*h,t[2]=-a*h,t[3]=n*h,t[4]=(a*o-i*s)*h,t[5]=(r*s-n*o)*h,t):null}function z(t){return t[0]*t[3]-t[1]*t[2]}function X(t,e,n){var r=e[0],a=e[1],i=e[2],s=e[3],o=e[4],h=e[5],l=n[0],u=n[1],c=n[2],f=n[3],m=n[4],d=n[5];return t[0]=r*l+i*u,t[1]=a*l+s*u,t[2]=r*c+i*f,t[3]=a*c+s*f,t[4]=r*m+i*d+o,t[5]=a*m+s*d+h,t}function H(t,e,n){var r=e[0],a=e[1],i=e[2],s=e[3],o=e[4],h=e[5],l=Math.sin(n),u=Math.cos(n);return t[0]=r*u+i*l,t[1]=a*u+s*l,t[2]=r*-l+i*u,t[3]=a*-l+s*u,t[4]=o,t[5]=h,t}function W(t,e,n){var r=e[0],a=e[1],i=e[2],s=e[3],o=e[4],h=e[5],l=n[0],u=n[1];return t[0]=r*l,t[1]=a*l,t[2]=i*u,t[3]=s*u,t[4]=o,t[5]=h,t}function G(t,e,n){var r=e[0],a=e[1],i=e[2],s=e[3],o=e[4],h=e[5],l=n[0],u=n[1];return t[0]=r,t[1]=a,t[2]=i,t[3]=s,t[4]=r*l+i*u+o,t[5]=a*l+s*u+h,t}function k(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=0,t[5]=0,t}function j(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function $(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function Z(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function Q(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)}function K(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t}function J(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}function tt(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t}function et(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t}function nt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function rt(t,e){var n=t[0],r=t[1],a=t[2],i=t[3],s=t[4],o=t[5],l=e[0],u=e[1],c=e[2],f=e[3],m=e[4],d=e[5];return Math.abs(n-l)<=h.EPSILON*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(r-u)<=h.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(a-c)<=h.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(i-f)<=h.EPSILON*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(s-m)<=h.EPSILON*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(o-d)<=h.EPSILON*Math.max(1,Math.abs(o),Math.abs(d))}var at=X,it=J,st=n(409),ot=n(684);function ht(){var t=new h.ARRAY_TYPE(3);return h.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function lt(t){var e=new h.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function ut(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function ct(t,e,n){var r=new h.ARRAY_TYPE(3);return r[0]=t,r[1]=e,r[2]=n,r}function ft(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function mt(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function dt(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function Mt(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function vt(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function pt(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function gt(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function bt(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function xt(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function wt(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function Rt(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function At(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function Et(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}function Tt(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2];return Math.hypot(n,r,a)}function yt(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2];return n*n+r*r+a*a}function It(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function Lt(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function Nt(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function Pt(t,e){var n=e[0],r=e[1],a=e[2],i=n*n+r*r+a*a;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function St(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Ot(t,e,n){var r=e[0],a=e[1],i=e[2],s=n[0],o=n[1],h=n[2];return t[0]=a*h-i*o,t[1]=i*s-r*h,t[2]=r*o-a*s,t}function _t(t,e,n,r){var a=e[0],i=e[1],s=e[2];return t[0]=a+r*(n[0]-a),t[1]=i+r*(n[1]-i),t[2]=s+r*(n[2]-s),t}function Vt(t,e,n,r,a,i){var s=i*i,o=s*(2*i-3)+1,h=s*(i-2)+i,l=s*(i-1),u=s*(3-2*i);return t[0]=e[0]*o+n[0]*h+r[0]*l+a[0]*u,t[1]=e[1]*o+n[1]*h+r[1]*l+a[1]*u,t[2]=e[2]*o+n[2]*h+r[2]*l+a[2]*u,t}function Yt(t,e,n,r,a,i){var s=1-i,o=s*s,h=i*i,l=o*s,u=3*i*o,c=3*h*s,f=h*i;return t[0]=e[0]*l+n[0]*u+r[0]*c+a[0]*f,t[1]=e[1]*l+n[1]*u+r[1]*c+a[1]*f,t[2]=e[2]*l+n[2]*u+r[2]*c+a[2]*f,t}function Dt(t,e){e=e||1;var n=2*h.RANDOM()*Math.PI,r=2*h.RANDOM()-1,a=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*a,t[1]=Math.sin(n)*a,t[2]=r*e,t}function Bt(t,e,n){var r=e[0],a=e[1],i=e[2],s=n[3]*r+n[7]*a+n[11]*i+n[15];return s=s||1,t[0]=(n[0]*r+n[4]*a+n[8]*i+n[12])/s,t[1]=(n[1]*r+n[5]*a+n[9]*i+n[13])/s,t[2]=(n[2]*r+n[6]*a+n[10]*i+n[14])/s,t}function Ut(t,e,n){var r=e[0],a=e[1],i=e[2];return t[0]=r*n[0]+a*n[3]+i*n[6],t[1]=r*n[1]+a*n[4]+i*n[7],t[2]=r*n[2]+a*n[5]+i*n[8],t}function qt(t,e,n){var r=n[0],a=n[1],i=n[2],s=n[3],o=e[0],h=e[1],l=e[2],u=a*l-i*h,c=i*o-r*l,f=r*h-a*o,m=a*f-i*c,d=i*u-r*f,M=r*c-a*u,v=2*s;return u*=v,c*=v,f*=v,m*=2,d*=2,M*=2,t[0]=o+u+m,t[1]=h+c+d,t[2]=l+f+M,t}function Ft(t,e,n,r){var a=[],i=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],i[0]=a[0],i[1]=a[1]*Math.cos(r)-a[2]*Math.sin(r),i[2]=a[1]*Math.sin(r)+a[2]*Math.cos(r),t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function Ct(t,e,n,r){var a=[],i=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],i[0]=a[2]*Math.sin(r)+a[0]*Math.cos(r),i[1]=a[1],i[2]=a[2]*Math.cos(r)-a[0]*Math.sin(r),t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function zt(t,e,n,r){var a=[],i=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],i[0]=a[0]*Math.cos(r)-a[1]*Math.sin(r),i[1]=a[0]*Math.sin(r)+a[1]*Math.cos(r),i[2]=a[2],t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function Xt(t,e){var n=t[0],r=t[1],a=t[2],i=e[0],s=e[1],o=e[2],h=Math.sqrt(n*n+r*r+a*a)*Math.sqrt(i*i+s*s+o*o),l=h&&St(t,e)/h;return Math.acos(Math.min(Math.max(l,-1),1))}function Ht(t){return t[0]=0,t[1]=0,t[2]=0,t}function Wt(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Gt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function kt(t,e){var n=t[0],r=t[1],a=t[2],i=e[0],s=e[1],o=e[2];return Math.abs(n-i)<=h.EPSILON*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-s)<=h.EPSILON*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(a-o)<=h.EPSILON*Math.max(1,Math.abs(a),Math.abs(o))}var jt,$t=Mt,Zt=vt,Qt=pt,Kt=Tt,Jt=yt,te=ut,ee=It,ne=(jt=ht(),function(t,e,n,r,a,i){var s,o;for(e||(e=3),n||(n=0),o=r?Math.min(r*e+n,t.length):t.length,s=n;s<o;s+=e)jt[0]=t[s],jt[1]=t[s+1],jt[2]=t[s+2],a(jt,jt,i),t[s]=jt[0],t[s+1]=jt[1],t[s+2]=jt[2];return t}),re=n(796);function ae(){var t=new h.ARRAY_TYPE(4);return h.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function ie(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function se(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function oe(t,e){var n=2*Math.acos(e[3]),r=Math.sin(n/2);return r>h.EPSILON?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n}function he(t,e){var n=Be(t,e);return Math.acos(2*n*n-1)}function le(t,e,n){var r=e[0],a=e[1],i=e[2],s=e[3],o=n[0],h=n[1],l=n[2],u=n[3];return t[0]=r*u+s*o+a*l-i*h,t[1]=a*u+s*h+i*o-r*l,t[2]=i*u+s*l+r*h-a*o,t[3]=s*u-r*o-a*h-i*l,t}function ue(t,e,n){n*=.5;var r=e[0],a=e[1],i=e[2],s=e[3],o=Math.sin(n),h=Math.cos(n);return t[0]=r*h+s*o,t[1]=a*h+i*o,t[2]=i*h-a*o,t[3]=s*h-r*o,t}function ce(t,e,n){n*=.5;var r=e[0],a=e[1],i=e[2],s=e[3],o=Math.sin(n),h=Math.cos(n);return t[0]=r*h-i*o,t[1]=a*h+s*o,t[2]=i*h+r*o,t[3]=s*h-a*o,t}function fe(t,e,n){n*=.5;var r=e[0],a=e[1],i=e[2],s=e[3],o=Math.sin(n),h=Math.cos(n);return t[0]=r*h+a*o,t[1]=a*h-r*o,t[2]=i*h+s*o,t[3]=s*h-i*o,t}function me(t,e){var n=e[0],r=e[1],a=e[2];return t[0]=n,t[1]=r,t[2]=a,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-a*a)),t}function de(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],s=Math.sqrt(n*n+r*r+a*a),o=Math.exp(i),h=s>0?o*Math.sin(s)/s:0;return t[0]=n*h,t[1]=r*h,t[2]=a*h,t[3]=o*Math.cos(s),t}function Me(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],s=Math.sqrt(n*n+r*r+a*a),o=s>0?Math.atan2(s,i)/s:0;return t[0]=n*o,t[1]=r*o,t[2]=a*o,t[3]=.5*Math.log(n*n+r*r+a*a+i*i),t}function ve(t,e,n){return Me(t,e),De(t,t,n),de(t,t),t}function pe(t,e,n,r){var a,i,s,o,l,u=e[0],c=e[1],f=e[2],m=e[3],d=n[0],M=n[1],v=n[2],p=n[3];return(i=u*d+c*M+f*v+m*p)<0&&(i=-i,d=-d,M=-M,v=-v,p=-p),1-i>h.EPSILON?(a=Math.acos(i),s=Math.sin(a),o=Math.sin((1-r)*a)/s,l=Math.sin(r*a)/s):(o=1-r,l=r),t[0]=o*u+l*d,t[1]=o*c+l*M,t[2]=o*f+l*v,t[3]=o*m+l*p,t}function ge(t){var e=h.RANDOM(),n=h.RANDOM(),r=h.RANDOM(),a=Math.sqrt(1-e),i=Math.sqrt(e);return t[0]=a*Math.sin(2*Math.PI*n),t[1]=a*Math.cos(2*Math.PI*n),t[2]=i*Math.sin(2*Math.PI*r),t[3]=i*Math.cos(2*Math.PI*r),t}function be(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],s=n*n+r*r+a*a+i*i,o=s?1/s:0;return t[0]=-n*o,t[1]=-r*o,t[2]=-a*o,t[3]=i*o,t}function xe(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function we(t,e){var n,r=e[0]+e[4]+e[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var a=0;e[4]>e[0]&&(a=1),e[8]>e[3*a+a]&&(a=2);var i=(a+1)%3,s=(a+2)%3;n=Math.sqrt(e[3*a+a]-e[3*i+i]-e[3*s+s]+1),t[a]=.5*n,n=.5/n,t[3]=(e[3*i+s]-e[3*s+i])*n,t[i]=(e[3*i+a]+e[3*a+i])*n,t[s]=(e[3*s+a]+e[3*a+s])*n}return t}function Re(t,e,n,r){var a=.5*Math.PI/180;e*=a,n*=a,r*=a;var i=Math.sin(e),s=Math.cos(e),o=Math.sin(n),h=Math.cos(n),l=Math.sin(r),u=Math.cos(r);return t[0]=i*h*u-s*o*l,t[1]=s*o*u+i*h*l,t[2]=s*h*l-i*o*u,t[3]=s*h*u+i*o*l,t}function Ae(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var Ee,Te,ye,Ie,Le,Ne,Pe=re.clone,Se=re.fromValues,Oe=re.copy,_e=re.set,Ve=re.add,Ye=le,De=re.scale,Be=re.dot,Ue=re.lerp,qe=re.length,Fe=qe,Ce=re.squaredLength,ze=Ce,Xe=re.normalize,He=re.exactEquals,We=re.equals,Ge=(Ee=ht(),Te=ct(1,0,0),ye=ct(0,1,0),function(t,e,n){var r=St(e,n);return r<-.999999?(Ot(Ee,Te,e),te(Ee)<1e-6&&Ot(Ee,ye,e),Pt(Ee,Ee),se(t,Ee,Math.PI),t):r>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(Ot(Ee,e,n),t[0]=Ee[0],t[1]=Ee[1],t[2]=Ee[2],t[3]=1+r,Xe(t,t))}),ke=(Ie=ae(),Le=ae(),function(t,e,n,r,a,i){return pe(Ie,e,a,i),pe(Le,n,r,i),pe(t,Ie,Le,2*i*(1-i)),t}),je=(Ne=st.create(),function(t,e,n,r){return Ne[0]=n[0],Ne[3]=n[1],Ne[6]=n[2],Ne[1]=r[0],Ne[4]=r[1],Ne[7]=r[2],Ne[2]=-e[0],Ne[5]=-e[1],Ne[8]=-e[2],Xe(t,we(t,Ne))});function $e(){var t=new h.ARRAY_TYPE(8);return h.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t}function Ze(t){var e=new h.ARRAY_TYPE(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function Qe(t,e,n,r,a,i,s,o){var l=new h.ARRAY_TYPE(8);return l[0]=t,l[1]=e,l[2]=n,l[3]=r,l[4]=a,l[5]=i,l[6]=s,l[7]=o,l}function Ke(t,e,n,r,a,i,s){var o=new h.ARRAY_TYPE(8);o[0]=t,o[1]=e,o[2]=n,o[3]=r;var l=.5*a,u=.5*i,c=.5*s;return o[4]=l*r+u*n-c*e,o[5]=u*r+c*t-l*n,o[6]=c*r+l*e-u*t,o[7]=-l*t-u*e-c*n,o}function Je(t,e,n){var r=.5*n[0],a=.5*n[1],i=.5*n[2],s=e[0],o=e[1],h=e[2],l=e[3];return t[0]=s,t[1]=o,t[2]=h,t[3]=l,t[4]=r*l+a*h-i*o,t[5]=a*l+i*s-r*h,t[6]=i*l+r*o-a*s,t[7]=-r*s-a*o-i*h,t}function tn(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t}function en(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function nn(t,e){var n=ae();ot.getRotation(n,e);var r=new h.ARRAY_TYPE(3);return ot.getTranslation(r,e),Je(t,n,r),t}function rn(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function an(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function sn(t,e,n,r,a,i,s,o,h){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=i,t[5]=s,t[6]=o,t[7]=h,t}var on=Oe;function hn(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t}var ln=Oe;function un(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t}function cn(t,e){var n=e[4],r=e[5],a=e[6],i=e[7],s=-e[0],o=-e[1],h=-e[2],l=e[3];return t[0]=2*(n*l+i*s+r*h-a*o),t[1]=2*(r*l+i*o+a*s-n*h),t[2]=2*(a*l+i*h+n*o-r*s),t}function fn(t,e,n){var r=e[0],a=e[1],i=e[2],s=e[3],o=.5*n[0],h=.5*n[1],l=.5*n[2],u=e[4],c=e[5],f=e[6],m=e[7];return t[0]=r,t[1]=a,t[2]=i,t[3]=s,t[4]=s*o+a*l-i*h+u,t[5]=s*h+i*o-r*l+c,t[6]=s*l+r*h-a*o+f,t[7]=-r*o-a*h-i*l+m,t}function mn(t,e,n){var r=-e[0],a=-e[1],i=-e[2],s=e[3],o=e[4],h=e[5],l=e[6],u=e[7],c=o*s+u*r+h*i-l*a,f=h*s+u*a+l*r-o*i,m=l*s+u*i+o*a-h*r,d=u*s-o*r-h*a-l*i;return ue(t,e,n),r=t[0],a=t[1],i=t[2],s=t[3],t[4]=c*s+d*r+f*i-m*a,t[5]=f*s+d*a+m*r-c*i,t[6]=m*s+d*i+c*a-f*r,t[7]=d*s-c*r-f*a-m*i,t}function dn(t,e,n){var r=-e[0],a=-e[1],i=-e[2],s=e[3],o=e[4],h=e[5],l=e[6],u=e[7],c=o*s+u*r+h*i-l*a,f=h*s+u*a+l*r-o*i,m=l*s+u*i+o*a-h*r,d=u*s-o*r-h*a-l*i;return ce(t,e,n),r=t[0],a=t[1],i=t[2],s=t[3],t[4]=c*s+d*r+f*i-m*a,t[5]=f*s+d*a+m*r-c*i,t[6]=m*s+d*i+c*a-f*r,t[7]=d*s-c*r-f*a-m*i,t}function Mn(t,e,n){var r=-e[0],a=-e[1],i=-e[2],s=e[3],o=e[4],h=e[5],l=e[6],u=e[7],c=o*s+u*r+h*i-l*a,f=h*s+u*a+l*r-o*i,m=l*s+u*i+o*a-h*r,d=u*s-o*r-h*a-l*i;return fe(t,e,n),r=t[0],a=t[1],i=t[2],s=t[3],t[4]=c*s+d*r+f*i-m*a,t[5]=f*s+d*a+m*r-c*i,t[6]=m*s+d*i+c*a-f*r,t[7]=d*s-c*r-f*a-m*i,t}function vn(t,e,n){var r=n[0],a=n[1],i=n[2],s=n[3],o=e[0],h=e[1],l=e[2],u=e[3];return t[0]=o*s+u*r+h*i-l*a,t[1]=h*s+u*a+l*r-o*i,t[2]=l*s+u*i+o*a-h*r,t[3]=u*s-o*r-h*a-l*i,o=e[4],h=e[5],l=e[6],u=e[7],t[4]=o*s+u*r+h*i-l*a,t[5]=h*s+u*a+l*r-o*i,t[6]=l*s+u*i+o*a-h*r,t[7]=u*s-o*r-h*a-l*i,t}function pn(t,e,n){var r=e[0],a=e[1],i=e[2],s=e[3],o=n[0],h=n[1],l=n[2],u=n[3];return t[0]=r*u+s*o+a*l-i*h,t[1]=a*u+s*h+i*o-r*l,t[2]=i*u+s*l+r*h-a*o,t[3]=s*u-r*o-a*h-i*l,o=n[4],h=n[5],l=n[6],u=n[7],t[4]=r*u+s*o+a*l-i*h,t[5]=a*u+s*h+i*o-r*l,t[6]=i*u+s*l+r*h-a*o,t[7]=s*u-r*o-a*h-i*l,t}function gn(t,e,n,r){if(Math.abs(r)<h.EPSILON)return rn(t,e);var a=Math.hypot(n[0],n[1],n[2]);r*=.5;var i=Math.sin(r),s=i*n[0]/a,o=i*n[1]/a,l=i*n[2]/a,u=Math.cos(r),c=e[0],f=e[1],m=e[2],d=e[3];t[0]=c*u+d*s+f*l-m*o,t[1]=f*u+d*o+m*s-c*l,t[2]=m*u+d*l+c*o-f*s,t[3]=d*u-c*s-f*o-m*l;var M=e[4],v=e[5],p=e[6],g=e[7];return t[4]=M*u+g*s+v*l-p*o,t[5]=v*u+g*o+p*s-M*l,t[6]=p*u+g*l+M*o-v*s,t[7]=g*u-M*s-v*o-p*l,t}function bn(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t}function xn(t,e,n){var r=e[0],a=e[1],i=e[2],s=e[3],o=n[4],h=n[5],l=n[6],u=n[7],c=e[4],f=e[5],m=e[6],d=e[7],M=n[0],v=n[1],p=n[2],g=n[3];return t[0]=r*g+s*M+a*p-i*v,t[1]=a*g+s*v+i*M-r*p,t[2]=i*g+s*p+r*v-a*M,t[3]=s*g-r*M-a*v-i*p,t[4]=r*u+s*o+a*l-i*h+c*g+d*M+f*p-m*v,t[5]=a*u+s*h+i*o-r*l+f*g+d*v+m*M-c*p,t[6]=i*u+s*l+r*h-a*o+m*g+d*p+c*v-f*M,t[7]=s*u-r*o-a*h-i*l+d*g-c*M-f*v-m*p,t}var wn=xn;function Rn(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t}var An=Be;function En(t,e,n,r){var a=1-r;return An(e,n)<0&&(r=-r),t[0]=e[0]*a+n[0]*r,t[1]=e[1]*a+n[1]*r,t[2]=e[2]*a+n[2]*r,t[3]=e[3]*a+n[3]*r,t[4]=e[4]*a+n[4]*r,t[5]=e[5]*a+n[5]*r,t[6]=e[6]*a+n[6]*r,t[7]=e[7]*a+n[7]*r,t}function Tn(t,e){var n=Nn(e);return t[0]=-e[0]/n,t[1]=-e[1]/n,t[2]=-e[2]/n,t[3]=e[3]/n,t[4]=-e[4]/n,t[5]=-e[5]/n,t[6]=-e[6]/n,t[7]=e[7]/n,t}function yn(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t}var In=qe,Ln=In,Nn=Ce,Pn=Nn;function Sn(t,e){var n=Nn(e);if(n>0){n=Math.sqrt(n);var r=e[0]/n,a=e[1]/n,i=e[2]/n,s=e[3]/n,o=e[4],h=e[5],l=e[6],u=e[7],c=r*o+a*h+i*l+s*u;t[0]=r,t[1]=a,t[2]=i,t[3]=s,t[4]=(o-r*c)/n,t[5]=(h-a*c)/n,t[6]=(l-i*c)/n,t[7]=(u-s*c)/n}return t}function On(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function _n(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]}function Vn(t,e){var n=t[0],r=t[1],a=t[2],i=t[3],s=t[4],o=t[5],l=t[6],u=t[7],c=e[0],f=e[1],m=e[2],d=e[3],M=e[4],v=e[5],p=e[6],g=e[7];return Math.abs(n-c)<=h.EPSILON*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(r-f)<=h.EPSILON*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(a-m)<=h.EPSILON*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(i-d)<=h.EPSILON*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(s-M)<=h.EPSILON*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(o-v)<=h.EPSILON*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(l-p)<=h.EPSILON*Math.max(1,Math.abs(l),Math.abs(p))&&Math.abs(u-g)<=h.EPSILON*Math.max(1,Math.abs(u),Math.abs(g))}function Yn(){var t=new h.ARRAY_TYPE(2);return h.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0),t}function Dn(t){var e=new h.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e}function Bn(t,e){var n=new h.ARRAY_TYPE(2);return n[0]=t,n[1]=e,n}function Un(t,e){return t[0]=e[0],t[1]=e[1],t}function qn(t,e,n){return t[0]=e,t[1]=n,t}function Fn(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function Cn(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function zn(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function Xn(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function Hn(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function Wn(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function Gn(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function kn(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}function jn(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function $n(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function Zn(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t}function Qn(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.hypot(n,r)}function Kn(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function Jn(t){var e=t[0],n=t[1];return Math.hypot(e,n)}function tr(t){var e=t[0],n=t[1];return e*e+n*n}function er(t,e){return t[0]=-e[0],t[1]=-e[1],t}function nr(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function rr(t,e){var n=e[0],r=e[1],a=n*n+r*r;return a>0&&(a=1/Math.sqrt(a)),t[0]=e[0]*a,t[1]=e[1]*a,t}function ar(t,e){return t[0]*e[0]+t[1]*e[1]}function ir(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t}function sr(t,e,n,r){var a=e[0],i=e[1];return t[0]=a+r*(n[0]-a),t[1]=i+r*(n[1]-i),t}function or(t,e){e=e||1;var n=2*h.RANDOM()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t}function hr(t,e,n){var r=e[0],a=e[1];return t[0]=n[0]*r+n[2]*a,t[1]=n[1]*r+n[3]*a,t}function lr(t,e,n){var r=e[0],a=e[1];return t[0]=n[0]*r+n[2]*a+n[4],t[1]=n[1]*r+n[3]*a+n[5],t}function ur(t,e,n){var r=e[0],a=e[1];return t[0]=n[0]*r+n[3]*a+n[6],t[1]=n[1]*r+n[4]*a+n[7],t}function cr(t,e,n){var r=e[0],a=e[1];return t[0]=n[0]*r+n[4]*a+n[12],t[1]=n[1]*r+n[5]*a+n[13],t}function fr(t,e,n,r){var a=e[0]-n[0],i=e[1]-n[1],s=Math.sin(r),o=Math.cos(r);return t[0]=a*o-i*s+n[0],t[1]=a*s+i*o+n[1],t}function mr(t,e){var n=t[0],r=t[1],a=e[0],i=e[1],s=Math.sqrt(n*n+r*r)*Math.sqrt(a*a+i*i),o=s&&(n*a+r*i)/s;return Math.acos(Math.min(Math.max(o,-1),1))}function dr(t){return t[0]=0,t[1]=0,t}function Mr(t){return"vec2("+t[0]+", "+t[1]+")"}function vr(t,e){return t[0]===e[0]&&t[1]===e[1]}function pr(t,e){var n=t[0],r=t[1],a=e[0],i=e[1];return Math.abs(n-a)<=h.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-i)<=h.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))}var gr=Jn,br=Cn,xr=zn,wr=Xn,Rr=Qn,Ar=Kn,Er=tr,Tr=function(){var t=Yn();return function(e,n,r,a,i,s){var o,h;for(n||(n=2),r||(r=0),h=a?Math.min(a*n+r,e.length):e.length,o=r;o<h;o+=n)t[0]=e[o],t[1]=e[o+1],i(t,t,s),e[o]=t[0],e[o+1]=t[1];return e}}();globalThis.glmat=o})()})();